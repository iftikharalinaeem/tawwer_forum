<!doctype html>
<html>
    <head>
        <title>Embedded Vanilla Transport</title>
        <script type="text/javascript" src="js/easyXDM.min.js">
        </script>
        <style type="text/css">
            html, body { overflow: visible; background-color:#ffffff; width:100%; height:100%; margin:0; padding:0; }
				iframe { width:100%; height:100%; border:0; margin:0; padding:0; display: block; }
        </style>
        <script type="text/javascript">
				var webroot = 'http://localhost/vanilla';
            var transport = new easyXDM.Socket({
                local: "transporthelper.html",
					 onMessage: function(message, origin) {
						  var path = message;
						  var hashIndex = path.indexOf('#');
						  var hash = '';
						  if (hashIndex > -1) {
								hash = path.substr(hashIndex);
								path = path.substr(0, hashIndex);
						  }
						  var concat = path.indexOf('?') > -1 ? '&' : '?';
						  window.frames[0].location.replace(webroot + path + concat + 'DeliveryType=EMBED' + hash);
					 }
            });
        </script>
    </head>
    <body><iframe id="EmbeddedFrame" frameborder="0"></iframe></body>
</html>
