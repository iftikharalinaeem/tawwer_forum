{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","addSiteIDFilter","siteID","gdn","definition","loopQueries","get","x","property_name","addFilter","getCallback","getAnalysesProcessor","analysesProcessor","getClient","projectID","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","getTitle","getType","resetQuery","setCallback","newCallback","setAnalysesProcessor","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","getMetricMarkup","markup","Number","toLocaleString","replace","queryProcessor","KeenIOAnalysesProcessor","chartOptions","labelMapping","height","chartType","defaultOptions","axis","tick","count","format","grid","show","y","tooltip_contents","d","defaultTitleFormat","defaultValueFormat","color","text","toLocaleDateString","value","id","name","ratio","$","extend","dateFormat","formatPercent","toFixed","formatSeconds","totalSeconds","hours","Math","floor","minutes","seconds","result","toString","renderBody","el","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","view","_rendered","update","render","runQuery","widget","updateParams","timeframe","inArray","queries","each","params","j","filter","property","KeenIOFilterCallback","run","error","analyses","getQueryResult","window","analyticsDashboard","isPersonal","call","hide","queryResult","analysis","process","analyse","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}