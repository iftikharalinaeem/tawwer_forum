@import "compass";
@import "compass/css3";
@import "_iconfonts";
@import "_wysiwyg";

/**
 *  Define some mixins 
 */

@mixin border-box-important {
   -moz-box-sizing: border-box !important;
   -webkit-box-sizing: border-box !important;
   -box-sizing: border-box !important;
}


/**
 * Editor toolbar 
 */

/* By default, when JS not enabled, do not display editor. */
.editor {
   display: none;
}

/* If JS enabled */
.js-editor-active .editor {
   display: block;
}

.editor {
   padding: 5px 0;
   font-size: 14px;
   -webkit-user-select: none;  
   -moz-user-select: none;    
   user-select: none;
}

.editor-help-text {
   font-size: 11px;
}

.editor .icon {
   display: inline-block;
   padding: 5px 8px;
   margin: 0 1px;
   border: 1px solid transparent;
   cursor: pointer;
}

/* State of icons */
.editor .icon:hover,
.wysihtml5-command-active,
.wysihtml5-action-active,
.wysihtml5-command-dialog-opened {
   border-radius: 2px;
   background-color: #999999;
	background-color: rgba(0, 0, 0, 0.10);
}

.editor .editor-sep {
   border-left: 1px solid #999999;
   border-left: 1px solid rgba(0, 0, 0, 0.10);
   margin: 0 5px;
}

.editor .editor-dropdown {
   display: inline-block;
   position: relative;
}

/* Clicking on down caret does nothing, so let click seep through to parent */
.editor .icon-caret-down {
   font-size: 75%;
   pointer-events: none;
   margin-left: 6px;
   position: relative;
   top: -2px;
}


/**
 * Dropdowns 
 */

.editor-insert-dialog {
   margin: 5px 0 0 0;
   padding: 5px;
   width: 300px;
   position: absolute;
   z-index: 100;
   display: none;
}

.editor-dropdown-open .editor-insert-dialog {
   display: block;
}

.MenuButtons {
   margin-top: 5px;
   text-align: right;
   
   .Button {
      min-width: 55px;
   }
}

.editor-dropdown-open .editor-insert-dialog label {
   display: inline !important;
}

.editor-insert-dialog input.InputBox {
   @include box-sizing(border-box);
   width: 100%;
}

.editor-dd-color + .editor-insert-dialog {
   width: 92px;
}

.editor-dd-color + .editor-insert-dialog .color {
   width: 20px;
   height: 20px;
   float: left;
   cursor: pointer;
   margin: 1px 1px 0 0;
   border: 1px solid transparent;
}

.editor-dd-color + .editor-insert-dialog .color:hover,
.editor-dd-color + .editor-insert-dialog .wysihtml5-command-active {
   border: 1px solid #fff;
}

/**
 * Headers dropdown
 */

.editor-dd-format + .editor-insert-dialog {
   padding: 5px 0;
   width: auto;
}

.editor-dd-format + .editor-insert-dialog .wysihtml5-command-active {
   border-radius: 0;
}

.editor-dd-format + .editor-insert-dialog .editor-action-h1 {
   font-size: 18px;
   line-height: 28px !important;
}

.editor-dd-format + .editor-insert-dialog .editor-action-h2 {
   font-size: 16px;
}


/**
 * Emoji dropdown
 */

.editor-dd-emoji + .editor-insert-dialog {
   width: 120px;
}

.editor-dd-emoji + .editor-insert-dialog .emoji {
   display: inline-block;
   padding: 5px;
   background-repeat: no-repeat;
   background-position: center;
}

.editor-dd-emoji + .editor-insert-dialog .emoji:hover {
   cursor: pointer;
   border-radius: 2px;
   background-color: rgba(0, 0, 0, 0.10);
}


/**
 * Going full page 
 */

.editor-toggle-fullpage-button {
   float: right;
}

/* Added to body class with JS, so force specificity for everything 
   below; this makes editing very easy */

.js-editor-fullpage {
   overflow: hidden;
}

/* For some reason this element has right padding in core that does nothing, 
except offset the textarea in fullpage. Removing it in regular view has no 
affect, so it's not doing anything */

.js-editor-fullpage .TextBoxWrapper {
   padding: 0;
}

/* .FormWrapper */
.js-editor-fullpage #editor-fullpage-candidate {
   position: fixed;
   z-index: 9001;
   overflow-y: auto;
   top: 0;
   right: 0;
   left: 0;
   bottom: 0;
   padding: 0;
   background-color: #fff;
   height: 100%;
   width: 100%;
}

.js-editor-fullpage #editor-fullpage-candidate .editor {
   border: 1px solid transparent;
   position: fixed;
   top: 0;
   left: 0;
   right: 0;
   margin: 0 auto;
   background-color: rgba(255,255,255,0.90);
}

.js-editor-fullpage #editor-fullpage-candidate form {
   margin: 0 auto;
   padding: 50px 0 10px 0;
   animation-duration: 0.8s;
   animation-name: editor-anim-editor;
}

.js-editor-fullpage #editor-fullpage-candidate .editor,
.js-editor-fullpage #editor-fullpage-candidate form {
   max-width: 800px;
}

/* have to be a bit rough here, because styles defined inline by wysihtml5 */
.js-editor-fullpage .TextBoxWrapper .BodyBox,
.js-editor-fullpage .TextBoxWrapper .wysihtml5-sandbox {
   width: 100% !important;
   padding: 10px !important;
}

/* Fix some content boxes */
.js-editor-fullpage #editor-fullpage-candidate input, 
.js-editor-fullpage .TextBoxWrapper .BodyBox,
.js-editor-fullpage .TextBoxWrapper .wysihtml5-sandbox {
   @include border-box-important;
}

/* Set default heights for each editor view. Regular (markdown, html, bbcode) 
all require min-height to be set to not interfere with autogrow, while 
wysiwgy requires height to not interfere with autogrow. */

.js-editor-fullpage .TextBoxWrapper .BodyBox {
   min-height: 400px;
}

.js-editor-fullpage .TextBoxWrapper .wysihtml5-sandbox {
   height: 400px !important;
}



/* Animation definition for fade in editor on fullpage */
@keyframes editor-anim-editor {
  0% {
    opacity: 0;
  }
}

/**
 * Hide some actions per editor view.
 *
 * Html, BBCode, and Markdown views have slight differences than the Wysiwyg, 
 * so hide the particular ones.
 */
.editor-format-html .editor-toggle-source,
.editor-format-bbcode .editor-toggle-source,
.editor-format-markdown .editor-toggle-source, 
.editor-format-html .sep-switches,
.editor-format-bbcode .sep-switches,
.editor-format-markdown .sep-switches,

.editor-format-markdown .sep-align,
.editor-format-markdown .icon-align-left,
.editor-format-markdown .icon-align-center,
.editor-format-markdown .icon-align-right, 

.editor-format-html .editor-image-align,
.editor-format-bbcode .editor-image-align,
.editor-format-markdown .editor-image-align,

.editor-format-bbcode .editor-action-h1,
.editor-format-bbcode .editor-action-h2

{
   display: none;
}


/**
 * Brute force hide other editors enabled after this one.
 *
 * In case some of the other editors were enabled after this one, just have 
 * them hidden from page, essentially making this editor the veto. This is 
 * a last ditch effort to at least make sure editor is usable when others 
 * are enabled. 
 */

.js-editor-active .cleditorMain iframe {
   display: none !important;
}

.js-editor-active .cleditorMain .wysihtml5-sandbox {
   display: block !important;
}

.js-editor-active .cleditorToolbar,
.js-editor-active .ButtonBar, 
.js-editor-active .ButtonBarMarkupHint {
   display: none !important;
}


/* Media query: Hiding non-essential buttons */
@media (max-width: 767px) {
   .hidden-xs {
      display: none !important;
   }

   .js-editor-fullpage .TextBoxWrapper .BodyBox,
   .js-editor-fullpage .TextBoxWrapper .wysihtml5-sandbox {
      height: auto !important;
   }

   /* This is not necessary or very specific, but on mobile, apple products 
      add rounded corners */
   textarea {
      border-radius: 0;
   }
}