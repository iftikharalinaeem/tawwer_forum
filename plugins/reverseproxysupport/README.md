# Reverse Proxy Support

Allows a forum to appear to be served from a different domain.
Useful to setup vanilla as a subdirectory.

## Specification

Settings:
- Proxy URL: A scheme, host, port (optional), path (optional) combo.
All URL generated by the forum will be relative to this URL.
  - Scheme: either `http://` or `https://`
  - Host: hostname or ip of the proxy
  - Port: Need to be specified if different than the defaults 80 and 443. 
  - Path: Subdirectory from which the forum will be served.
- Redirect to proxy: Activate to 301 redirect the forum URLs to the proxy URL. Useful for SEO purpose.
Note that this will make it impossible to access the forum from it's real URL unless Excluded IPs is used.
- Excluded IPs: Prevent redirection to the proxy if the `X-Forwarded-For` header matches one of the listed IPs.

## Case scenario

Let's say that we have a domain `proxy.example.com` and we want our forum to be located under
`proxy.example.com/community` but the forum is hosted on `vanillaforum.example.com`.

We can setup a proxy that will will redirect all call from `proxy.example.com/community` to `vanillaforum.example.com`
but the problem here is that all URL in the page will be generated using `vanillaforum.example.com`.

This plugin addresses this issue!

### How to setup

*This example will be using nginx as our proxy*

Proxy setup:
```nginx
    server_name proxy.example.com;
    listen 80;

    location /community/ {
        # Forward the IP address
        proxy_set_header X-Forwarded-For $remote_addr;
        # Must match "Proxy URL" in the Settings. 
        proxy_set_header X-Proxy-For http://proxy.exampe.com/community;
        proxy_pass http://vanillaforum.example.com/;
    }
```

Plugin setup:

- Proxy URL: http://proxy.exampe.com/community

Test the configuration and voila!

Note: You will probably want to enable the redirects too.
