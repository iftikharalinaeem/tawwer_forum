/**
 * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license Proprietary
 */

$panelLayout_topMargin                                                : $utility-baseUnit * 4;
$panelLayout_bottomMargin                                             : $utility-baseUnit * 4;

$panelLayout-noBleed_breakpoint                                       : $global-main_paddedWidth +  2 * $icon-default_size + $utility-baseUnit !default;
$panelLayout-twoColumn_breakpoint                                     : $global-main_paddedWidth !default;
$panelLayout-oneColumn_breakpoint                                     : $global-twoColumn_breakpoint !default;

$panelLayout-panel_topPadding                                         : $global-widgetInner_padding !default;
$panelLayout-panel_rightPadding                                       : $global-widgetInner_padding !default;
$panelLayout-panel_bottomPadding                                      : $global-widgetInner_padding !default;
$panelLayout-panel_leftPadding                                        : $global-widgetInner_padding !default;

$panelLayout-border_color                                             : rgba($global-border_color, .4) !default;

@mixin mediaQuery-panelLayout_noBleed {
    @media (max-width: #{$panelLayout-noBleed_breakpoint}) {
        @content;
    }
}


@mixin mediaQuery-panelLayout_twoColumn {
    @media (max-width: #{$panelLayout-twoColumn_breakpoint}) {
        @content;
    }
}

@mixin mediaQuery-panelLayout_oneColumn {
    @media (max-width: #{$panelLayout-oneColumn_breakpoint}) {
        @content;
    }
}

.panelLayout {
    margin: {
        top: $panelLayout_topMargin;
        bottom: $panelLayout_bottomMargin;
    }
}


.panelLayout,
.panelLayout-panel,
.panelLayout-top,
.panelLayout-main {
    width: 100%;
}

.panelLayout {
    &.isOneCol {
        width: calc(100% - #{2 * $global-panel_paddedWidth});
        margin: auto;
    }
}

.panelLayout-container {
    display: flex;
    flex-wrap: nowrap;
}

.panelLayout-top {
    margin-bottom: $global-gutter_halfSize;
}


// Left Section
.panelLayout-left {
    position: relative;
    width: $global-panel_paddedWidth;
    flex-basis: $global-panel_paddedWidth;
    padding-right: $global-panel_spacerOuter;
    z-index: 2;
    border-right: solid $panelLayout-border_color 1px;
}

.panelLayout-right {
    width: $global-panel_paddedWidth;
    flex-basis: $global-panel_paddedWidth;
    padding-left: $global-panel_spacerOuter;
    border-left: solid $panelLayout-border_color 1px;
}

// Middle Column
.panelLayout-middle {
    flex-grow: 1;
    width: 100%;
    padding: {
        right: $global-gutter_halfSize;
        left: $global-gutter_halfSize;
    }

    &.hasAdjacentPanel {
        flex-basis: calc(100% - #{$global-panel_paddedWidth});
        max-width: calc(100% - #{$global-panel_paddedWidth});

        @include mediaQuery-panelLayout_oneColumn {
            width: 100%;
            max-width: 100%;
            flex-basis: 100%;
        }
    }
}


.panelLayout-breadcrumbs {
    padding: {
        right: $global-gutter_quarterSize;
        left: $global-gutter_quarterSize;
    }

    &.hasAdjacentPanel {
        flex-basis: calc(100% - #{$global-panel_paddedWidth});
        max-width: calc(100% - #{$global-panel_paddedWidth});

        @include mediaQuery-panelLayout_oneColumn {
            flex-basis: 100%;
            max-width: 100%;
        }
    }
}

// Content section
.panelLayout-content {
    display: flex;
    flex-grow: 1;
    width: 100%;

    &.hasAdjacentPanel {
        flex-basis: calc(100% - #{$global-panel_paddedWidth});
        max-width: calc(100% - #{$global-panel_paddedWidth});

        padding: {
            left: #{$global-relativeSpacer - $global-gutter_halfSize};
            right: #{$global-relativeSpacer - $global-gutter_halfSize};
        }

        @include mediaQuery-panelLayout_twoColumn {
            padding: {
                left: 0;
            }
        }

        @include mediaQuery-panelLayout_oneColumn {
            @include backLinkNoBleedStyles;
            padding: {
                right: 0;
            }
            max-width: 100%;
            flex-basis: 100%;
            padding-left: 0;
        }
    }
}


@include mediaQuery-panelLayout_oneColumn {

    .panelLayout-middle {
        padding: {
            left: 0;
            right: 0;
        }
    }

    .panelLayout-sticky {
        position: relative;
        top: auto;
        left: auto;
        bottom: auto;
    }
}
