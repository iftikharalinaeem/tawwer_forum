/**
 * @author Stéphane LaFlèche <stephane.l@vanillaforums.com>
 * @copyright 2009-2018 Vanilla Forums Inc.
 * @license GPL-2.0-only
 */

$panelLayout_topMargin                               : $utility-baseUnit * 4;
$panelLayout_bottomMargin                            : $utility-baseUnit * 16;

$panelLayout-twoColumn_breakpoint                    : $global-main_paddedWidth !default;
$panelLayout-oneColumn_breakpoint                    : $global-twoColumn_breakpoint !default;

$panelLayout-panel_topPadding                        : $global-widgetInner_padding !default;
$panelLayout-panel_rightPadding                      : $global-widgetInner_padding !default;
$panelLayout-panel_bottomPadding                     : $global-widgetInner_padding !default;
$panelLayout-panel_leftPadding                       : $global-widgetInner_padding !default;

@mixin mediaQuery-panelLayout_twoColumn {
  @media (max-width: #{$panelLayout-twoColumn_breakpoint}) {
    @content;
  }
}

@mixin mediaQuery-panelLayout_oneColumn {
  @media (max-width: #{$panelLayout-oneColumn_breakpoint}) {
    @content;
  }
}

.panelLayout {
  display: block;
  margin: {
    top: $panelLayout_topMargin;
    bottom: $panelLayout_bottomMargin;
  }
}


.panelLayout,
.panelLayout-panel,
.panelLayout-top,
.panelLayout-main {
  display: block;
  width: 100%;
}

.panelLayout-container {
  display: flex;
  flex-wrap: nowrap;
}



// Left Section
.panelLayout-left {
  position: relative;
  width: $global-panel_width;
  flex-basis: $global-panel_width;
  z-index: 2;

  //@include mediaQuery-panelLayout_oneColumn {
  //  position: absolute;
  //  top: 0;
  //  left: 0;
  //  width: 100vw;
  //
  //  margin: 0;
  //  transform: translateX(-100vw);
  //  height: 100%;
  //  overflow: auto;
  //
  //  .panelArea-leftTop {
  //    display: none;
  //  }
  //
  //  &.isOpen {
  //    transform: translateX(0);
  //  }
  //}
}

.panelLayout-breadcrumbs {
  &.hasAdjacentPanel {
    flex-basis: calc(100% - #{$global-panel_width});
    max-width: calc(100% - #{$global-panel_width});

    @include mediaQuery-panelLayout_oneColumn {
      flex-basis: 100%;
      max-width: 100%;
    }
  }
}

// Content section
.panelLayout-content {
  display: flex;

  &.hasAdjacentPanel {
    flex-basis: calc(100% - #{$global-panel_width});
    max-width: calc(100% - #{$global-panel_width});

    @include mediaQuery-panelLayout_oneColumn {
      @include backLinkNoBleedStyles;
      max-width: 100%;
      flex-basis: 100%;
      padding-left: 0;
    }
  }
}

// Middle Column
.panelLayout-middle {
  flex-grow: 1;
  padding: {
    right: $global-gutter_quarterSize;
    left: $global-gutter_quarterSize;
  }

  &.hasAdjacentPanel {
    flex-basis: calc(100% - #{$global-panel_width});
    max-width: calc(100% - #{$global-panel_width});

    @include mediaQuery-panelLayout_twoColumn {
      width: 100%;
      max-width: 100%;
      flex-basis: 100%;
    }
  }
}

.panelLayout-right {
  width: $global-panel_width;
  flex-basis: $global-panel_width;
}



@include mediaQuery-panelLayout_oneColumn {
  .panelLayout-sticky {
    position: relative;
    top: auto;
    left: auto;
    bottom: auto;
  }
}
