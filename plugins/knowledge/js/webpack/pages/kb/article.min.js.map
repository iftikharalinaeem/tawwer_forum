{"version":3,"sources":["webpack://vanillaknowledge/./node_modules/classnames/index.js","webpack://vanillaknowledge/./applications/dashboard/src/scripts/embeds.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/dom.ts","webpack://vanillaknowledge/./applications/dashboard/node_modules/sprintf-js/src/sprintf.js","webpack://vanillaknowledge/./node_modules/react-router-dom/es/Link.js","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/getty.ts","webpack://vanillaknowledge/./node_modules/timers-browserify/main.js","webpack://vanillaknowledge/./node_modules/setimmediate/setImmediate.js","webpack://vanillaknowledge/./node_modules/twemoji/2/twemoji.npm.js","webpack://vanillaknowledge/./node_modules/tabbable/index.js","webpack://vanillaknowledge/./node_modules/lodash/uniqueId.js","webpack://vanillaknowledge/./node_modules/lodash/toString.js","webpack://vanillaknowledge/./node_modules/lodash/_baseToString.js","webpack://vanillaknowledge/./node_modules/lodash/_arrayMap.js","webpack://vanillaknowledge/./node_modules/lodash/isArray.js","webpack://vanillaknowledge/./applications/dashboard/src/scripts/components/DocumentTitle.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/components/NotFoundPage.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/layouts/components/Container.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/layouts/CompoundComponent.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/layouts/PanelLayout.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/components/Breadcrumb.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/components/Breadcrumbs.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/ArticleBreadcrumbs.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/components/Heading.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/ArticleActions.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/ArticleNavigation.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/components/Icons.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/components/BackLink.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/components/PageHeading.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/ArticleTitle.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/BaseEmbed.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/codepen.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/giphy.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/image.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/imgur.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/instagram.tsx","webpack://vanillaknowledge/./node_modules/shave/dist/shave.es.js","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/link.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/soundcloud.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/twitter.ts","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/video.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/spoilers.ts","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/CollapsableContent.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/embeds/quote.tsx","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/index.ts","webpack://vanillaknowledge/./applications/dashboard/src/scripts/app/user-content/emoji.ts","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/components/UserContent.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/ArticleContent.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/ArticleTOC.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/RelatedArticles.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/components/ArticleLayout.tsx","webpack://vanillaknowledge/../knowledge/plugins/knowledge/src/scripts/pages/article/ArticlePage.tsx"],"names":["__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","key","call","join","module","exports","default","undefined","__webpack_require__","embedRenderers","embedComponents","registerEmbedRenderer","type","renderer","registerEmbedComponent","component","delegatedEventListeners","delegateEvent","eventName","filterSelector","callback","scopeSelector","scope","functionKey","toString","document","querySelector","Error","HTMLElement","eventHash","_dashboard_utility__WEBPACK_IMPORTED_MODULE_0__","Object","keys","includes","wrappedCallback","event","match","target","closest","addEventListener","dataMap","WeakMap","setData","element","value","initialValue","has","get","set","getData","defaultValue","attributeString","hasAttribute","getAttribute","testChar","emojiSupportedCache","emojiOptions","className","size","convertToSafeEmojiCharacters","stringOrNode","canvas","createElement","getContext","offset","window","devicePixelRatio","ctx","fillStyle","textBaseline","font","fillText","getImageData","data","isEmojiSupported","twemoji__WEBPACK_IMPORTED_MODULE_1___default","a","parse","loadEventCallbacks","rejectionCache","Map","ensureScript","scriptUrl","Promise","resolve","reject","existingScript","callbacks","head","getElementsByTagName","script_1","src","onerror","error","timeout_1","setTimeout","onload","clearTimeout","forEach","delete","appendChild","getElementHeight","previousBottomMargin","height","getBoundingClientRect","_a","getComputedStyle","marginTop","marginBottom","topHeight","parseInt","Math","max","bottomHeight","bottomMargin","re","not_string","number","json","not_json","text","modulo","placeholder","key_access","index_access","sign","sprintf","cache","format","parse_tree","argv","k","pad","pad_character","pad_length","cursor","tree_length","node_type","output","is_positive","get_type","test","isNaN","TypeError","String","fromCharCode","JSON","stringify","toExponential","parseFloat","toFixed","toPrecision","substring","toUpperCase","replace","charAt","str_repeat","fmt","_fmt","arg_names","exec","SyntaxError","field_list","replacement_field","field_match","variable","prototype","slice","toLowerCase","input","multiplier","vsprintf","_argv","splice","history__WEBPACK_IMPORTED_MODULE_3__","_extends","assign","source","_possibleConstructorReturn","self","ReferenceError","isModifiedEvent","metaKey","altKey","ctrlKey","shiftKey","Link","_React$Component","_temp","_this","instance","Constructor","_classCallCheck","this","_len","args","_key","concat","handleClick","props","onClick","defaultPrevented","button","preventDefault","history","context","router","_this$props","to","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","render","_props","innerRef","obj","indexOf","_objectWithoutProperties","invariant__WEBPACK_IMPORTED_MODULE_2___default","location","href","createHref","react__WEBPACK_IMPORTED_MODULE_0___default","ref","Component","propTypes","prop_types__WEBPACK_IMPORTED_MODULE_1___default","func","string","bool","oneOfType","object","isRequired","defaultProps","contextTypes","shape","__webpack_exports__","_dashboard_application__WEBPACK_IMPORTED_MODULE_2__","initGettyEmbeds","_dashboard_embeds__WEBPACK_IMPORTED_MODULE_0__","renderGetty","convertGettyEmbeds","elements","contentElement","content","url","attributes","post","newLink","classList","add","setAttribute","id","style","width","setImmediate","loadGettyImages","gettyPosts","querySelectorAll","gettyPosts_1","__values","gettyPosts_1_1","next","sig","Number","items","capt","tld","i360","_b","sent","remove","fallbackCallback","c","gie","q","widgets","load","w","h","caption","isCaptioned","is360","_dashboard_dom__WEBPACK_IMPORTED_MODULE_1__","global","Function","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","timeout","close","unref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","random","onGlobalMessage","attachEvent","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","html","documentElement","script","onreadystatechange","removeChild","installReadyStateChangeImplementation","task","run","twemoji","base","ext","convert","fromCodePoint","codepoint","code","toCodePoint","parentNode","replaceChild","createText","alt","what","how","str","options","rawText","attrib","attrname","ret","iconId","grabTheRightIcon","escapeHTML","node","modified","fragment","subnode","index","img","allText","grabAllTextNodes","nodeType","childNodes","shouldntBeParsed","nodeName","createDocumentFragment","nodeValue","Image","defaultImageSrcGenerator","returnNull","folder","toSizeSquaredAsset","lastIndex","result","escaper","&","<",">","'","\"","UFE0Fg","U200D","rescaper","clean","createTextNode","s","replacer","icon","m","unicodeSurrogates","sep","r","p","charCodeAt","protocol","el","candidate","candidateIndexAttr","candidateIndex","elementDocument","ownerDocument","basicTabbables","orderedTabbables","isUnavailable","isOffCache","computedStyle","defaultView","isOff","nodeComputedStyle","display","visibility","createIsUnavailable","candidateSelectors","candidates","includeContainer","matches","Element","msMatchesSelector","webkitMatchesSelector","some","candidateSelector","unshift","l","tabIndex","tagName","disabled","tabbableNodes","sort","b","map","idCounter","prefix","baseToString","Symbol","arrayMap","isSymbol","INFINITY","symbolProto","symbolToString","array","iteratee","_super","DocumentTitle","__extends","componentDidMount","title","getHeadTitle","componentWillUpdate","nextProps","children","react_default","siteTitle","application","parts","NotFoundPage","NotFoundPage_extends","components_DocumentTitle","message","defineProperty","PureComponent","Container","Container_extends","Tag","tag","react","classnames_default","CompoundComponent","childIsOfType","child","displayName","name","childType","CompoundComponent_extends","PanelLayout","PanelLayout_extends","device","getParsedChildren","isMobile","DeviceChecker","MOBILE","isDesktop","DESKTOP","shouldRenderLeftPanel","leftTop","leftBottom","shouldRenderRightPanel","rightTop","rightBottom","panelClasses","noLeftPanel","noRightPanel","crumbClasses","ContentTag","contentTag","breadcrumbs","Panel","PanelArea","hasAdjacentPanel","middleTop","middleBottom","LeftTop","LeftBottom","MiddleTop","MiddleBottom","RightTop","RightBottom","Breadcrumbs","PanelLayout_Breadcrumbs","layouts_CompoundComponent","PanelWidget","Breadcrumb","Breadcrumb_extends","ariaCurrent","lastElement","aria-current","itemScope","itemType","itemProp","Breadcrumbs_extends","crumbCount_1","crumbs","crumb","components_Breadcrumb","aria-label","ArticleBreadcrumbs","ArticleBreadcrumbs_extends","components_Breadcrumbs","dummyBreadcrumbData","PageTitle","Heading_extends","depth","pageTitle","ArticleActions","ArticleActions_extends","Heading","ArticleNavigation","ArticleNavigation_extends","currentColorFill","fill","BackLink","BackLink_extends","xmlns","viewBox","d","leftChevron","PageHeading","PageHeading_extends","components_BackLink","backUrl","actions","ArticleTitle","ArticleTitle_extends","article","components_PageHeading","articleRevision","BaseEmbed","BaseEmbed_extends","onRenderComplete","codepen_CodePenEmbed","CodePenEmbed","codepen_extends","scrolling","embeds_BaseEmbed","giphy_GiphyEmbed","GiphyEmbed","giphy_extends","postID","ratioStyle","maxWidth","paddingBottom","image_ImageEmbed","ImageEmbed","image_extends","sanitizedUrl","utility","rel","imgur_ImgurEmbed","ImgurEmbed","imgur_extends","dataID","isAlbum","data-id","convertImgurEmbeds","then","componentDidUpdate","images","from","dom","imgurEmbed","createIframe","imagesLength","tasks","instagram_InstagramEmbed","InstagramEmbed","instagram_extends","permaLink","versionNumber","data-instgrmPermalink","data-instgrmVersion","data-instgrmCaptioned","convertInstagramEmbeds","instgrm","Embeds","shave_es","maxHeight","opts","els","character","classname","spaces","charHtml","styles","span","textProp","textContent","fullText","words","split","heightStyle","maxHeightStyle","offsetHeight","min","pivot","insertAdjacentHTML","diff","link_LinkEmbed","LinkEmbed","link_extends","photoUrl","body","linkImage","aria-hidden","dateTime","timestamp","humanTime","truncateEmbedLinks","container","untruncatedText","innerHTML","excerpt","truncateTextBasedOnMaxHeight","soundcloud_SoundcloudEmbed","SoundcloudEmbed","soundcloud_extends","visual","showArtwork","embedUrl","frameBorder","renderTweet","twttr","statusID","contains","conversation","createTweet","convertTwitterEmbeds","tweets","promises","root","all","video_VideoEmbed","VideoEmbed","clickHandler","setState","isPlaying","state","video_extends","ratioClass","paddingTop","thumbnail","data-url","role","PlayIcon","VideoIframe","shorthand","allow","allowFullScreen","strokeWidth","points","handlePlayVideo","dataset","react_dom_default","handleToggleSpoiler","spoilerContainer","toggle","CollapsableUserContent","selfRef","createRef","CollapsableContent_extends","overflow","dangerouslySetInnerHTML","calcMaxHeight","debounce_default","prevProps","__html","isCollapsed","getHeightInfo","current","needsCollapser","childElementCount","finalMaxHeight","lastBottomMargin","_c","done","preferredMaxHeight","_d","scrollHeight","setNeedsCollapser","mountQuoteEmbeds","embeds","embed","quoteData","quote_QuoteEmbed","inEditor","removeAttribute","embeds_1","quote_values","embeds_1_1","ChevronUpIcon","stroke-linecap","fill-rule","transform","ChevronDownIcon","QuoteEmbed","renderedBody","needsCollapseButton","toggleCollapseState","quote_extends","insertUser","uniqueId_default","bodyClasses","userUrl","titleTime","aria-pressed","CollapsableContent","bodyRaw","apiv2","response","quote","dateUpdated","dateInserted","Date","toLocaleString","year","month","day","weekday","hour","minute","initAllUserContent","scripts_embeds","getty","UserContent","UserContent_extends","ArticleContent","ArticleContent_extends","components_UserContent","bodyRendered","ArticleTOC","ArticleTOC_extends","RelatedArticles","RelatedArticles_extends","ArticleLayout_ArticleLayout","ArticleLayout","ArticleLayout_extends","components_Container","layouts_PanelLayout","components_ArticleBreadcrumbs","components_ArticleActions","components_ArticleNavigation","components_ArticleTitle","components_ArticleContent","components_ArticleTOC","components_RelatedArticles","components_ArticleLayout","DeviceContext","ArticlePage_ArticlePage","ArticlePage","ArticlePage_extends","articlePageState","parseIDFromSlug","status","api","ERROR","components_NotFoundPage","SUCCESS","getArticle","PENDING","numericID","isInteger","componentWillUnmount","clearPageState","slug","params","withRedux","es","knowledge","articlePage","dispatch","articlePageActions","clearArticlePageState"],"mappings":"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","file":"plugins/knowledge/js/webpack/pages/kb/article.min.js?558feed861ba60c1de6b","sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","/**\n * Embed utility functions and types.\n * This file should have NO external dependencies other than javascript.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { IDiscussionEmbed, ICommentEmbed, IScrapeData } from \"@dashboard/@types/api\";\n\nexport const FOCUS_CLASS = \"embed-focusableElement\";\n\nexport type IQuoteEmbedData = IDiscussionEmbed | ICommentEmbed;\nexport type IEmbedData = IScrapeData;\n\nexport interface IEmbedElements {\n    root: HTMLElement;\n    content: HTMLElement;\n}\n\nexport type EmbedRenderer = (elements: IEmbedElements, data: IEmbedData, inEditor: boolean) => Promise<void>;\n\nexport interface IEmbedProps<T = IScrapeData> {\n    data: T;\n    inEditor: boolean;\n    onRenderComplete: () => void;\n}\n\nconst embedRenderers: {\n    [type: string]: EmbedRenderer;\n} = {};\nconst embedComponents: {\n    [type: string]: React.ComponentClass<IEmbedProps>;\n} = {};\n\n/**\n * Get all of the registered embed types.\n */\nexport function getEditorEmbedTypes() {\n    return Object.keys(embedRenderers);\n}\n\n/**\n * Register an embed rendering function.\n */\nexport function registerEmbedRenderer(type: string, renderer: EmbedRenderer) {\n    embedRenderers[type] = renderer;\n}\n\n/**\n * Register an embed rendering function.\n */\nexport function registerEmbedComponent(type: string, component: React.ComponentClass<IEmbedProps>) {\n    embedComponents[type] = component;\n}\n\n/**\n * Render an embed into a DOM node based on it's type.\n */\nexport function renderEmbed(elements: IEmbedElements, data: IEmbedData, inEditor = true): Promise<void> {\n    return new Promise((resolve, reject) => {\n        if (!data.type) {\n            throw new Error(\"The embed type was not provided.\");\n        }\n\n        if (data.type === \"link\") {\n            elements.root.classList.add(\"embedText\");\n            elements.content.classList.add(\"embedText-content\");\n            elements.content.classList.add(\"embedLink-content\");\n        }\n\n        if (data.type === \"quote\") {\n            elements.root.classList.add(\"embedText\");\n            elements.content.classList.add(\"embedText-content\");\n            elements.content.classList.add(\"embedQuote-content\");\n        }\n\n        const renderer = data.type && embedRenderers[data.type];\n        const Component = data.type && embedComponents[data.type];\n\n        if (renderer) {\n            return renderer(elements, data, inEditor);\n        } else if (Component) {\n            ReactDOM.render(\n                <Component data={data as IScrapeData} inEditor={inEditor} onRenderComplete={resolve} />,\n                elements.content,\n            );\n        } else {\n            throw new Error(\"Could not find a renderer for the embed type - \" + data.type);\n        }\n    });\n}\n","/**\n * Utilities that have a hard dependency on the DOM.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as utility from \"@dashboard/utility\";\nimport twemoji from \"twemoji\";\nimport tabbable from \"tabbable\";\nimport { logError, log } from \"@dashboard/utility\";\nimport debounce from \"lodash/debounce\";\n\n/**\n * Use the browser's built-in functionality to quickly and safely escape a string.\n *\n * @param str - The string to escape.\n *\n * @returns Escaped HTML.\n */\nexport function escapeHTML(str: string): string {\n    const div = document.createElement(\"div\");\n    div.appendChild(document.createTextNode(str));\n    return div.innerHTML;\n}\n\n/**\n * Use the browser's built-in functionality to quickly unescape a string.\n * UNSAFE with unsafe strings; only use on previously-escaped ones!\n *\n * @param escapedString - A previously escaped string.\n *\n * @returns The unescaped string.\n */\nexport function unescapeHTML(escapedString: string): string {\n    const div = document.createElement(\"div\");\n    div.innerHTML = escapedString;\n    const child = div.childNodes[0];\n    return child && child.nodeValue ? child.nodeValue : \"\";\n}\n\n/**\n * Add the hidden class and aria-hidden attribute to an Element.\n *\n * @param element - The DOM Element to modify.\n */\nexport function hideElement(element: Element) {\n    element.classList.add(\"u-isHidden\");\n    element.setAttribute(\"aria-hidden\", \"true\");\n}\n\n/**\n * Remove the hidden class and aria-hidden attribute to an Element.\n *\n * @param element - The DOM Element to modify.\n */\nexport function unhideElement(element: Element) {\n    element.classList.remove(\"u-isHidden\");\n    element.removeAttribute(\"aria-hidden\");\n}\n\n/**\n * Check if an element is visible or not.\n *\n * @param element - The element to check.\n *\n * @returns The visibility.\n */\nexport function elementIsVisible(element: HTMLElement): boolean {\n    return !!(element.offsetWidth || element.offsetHeight || element.getClientRects().length);\n}\n\n/**\n * Get the form data out of a form element.\n *\n * @param {Element} formElement - The element to get the data out of.\n *\n * @returns {Object}\n */\nexport function getFormData(formElement) {\n    if (!(formElement instanceof HTMLFormElement)) {\n        return {};\n    }\n\n    const data = new FormData(formElement) as any;\n    const result = {};\n\n    data.forEach((key, value) => {\n        result[key] = value;\n    });\n\n    return result;\n}\n\nconst delegatedEventListeners = {};\n\n/**\n * Create an event listener using event delegation.\n *\n * @param eventName - The Event to listen for.\n * @param filterSelector - A CSS selector to match against.\n * @param callback - The callback function. This gets passed the fired event.\n * @param scopeSelector - And element to scope the event listener to.\n *\n * @returns The hash of the event. Save this to use removeDelegatedEvent().\n */\nexport function delegateEvent(\n    eventName: string,\n    filterSelector: string,\n    callback: (event: Event, triggeringElement: HTMLElement) => boolean | void,\n    scopeSelector?: string | HTMLElement,\n): string | undefined {\n    let functionKey = eventName + filterSelector + callback.toString();\n\n    let scope;\n\n    if (typeof scopeSelector === \"string\") {\n        scope = document.querySelector(scopeSelector);\n\n        if (!scope) {\n            throw new Error(`Unable to find element in the document for scopeSelector: ${scopeSelector}`);\n        } else {\n            functionKey += scopeSelector;\n        }\n    } else if (scopeSelector instanceof HTMLElement) {\n        scope = scopeSelector;\n    } else {\n        scope = document;\n    }\n\n    const eventHash = utility.hashString(functionKey).toString();\n\n    if (!Object.keys(delegatedEventListeners).includes(eventHash)) {\n        const wrappedCallback = event => {\n            // Get the nearest DOMNode that matches the given selector.\n            const match = filterSelector ? event.target.closest(filterSelector) : event.target;\n\n            if (match) {\n                // Call the callback with the matching element as the context.\n                return callback.call(match, event, match);\n            }\n        };\n\n        const listener = scope.addEventListener(eventName, wrappedCallback);\n        delegatedEventListeners[eventHash] = {\n            scope,\n            eventName,\n            wrappedCallback,\n        };\n        return eventHash;\n    }\n}\n\n/**\n * Remove a delegated event listener.\n *\n * @param eventHash - The event hash passed from delegateEvent().\n */\nexport function removeDelegatedEvent(eventHash: string) {\n    const { scope, eventName, wrappedCallback } = delegatedEventListeners[eventHash];\n    scope.removeEventListener(eventName, wrappedCallback);\n    delete delegatedEventListeners[eventHash];\n}\n\nexport function removeAllDelegatedEvents() {\n    Object.keys(delegatedEventListeners).forEach(key => {\n        removeDelegatedEvent(key);\n    });\n}\n\n/**\n * Toggle any attribute on an element.\n *\n * @param element - The element to toggle on.\n * @param attribute - The attribute to toggle.\n */\nexport function toggleAttribute(element: Element, attribute: string) {\n    const newValue = element.getAttribute(attribute) === \"false\";\n    element.setAttribute(attribute, newValue);\n}\n\nconst dataMap = new WeakMap();\n\n/**\n * Set a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to assosciate the data with.\n * @param key - The key to assosciate the data with.\n * @param value - The value to store.\n */\nexport function setData(element: Element, key: string, value: any) {\n    const initialValue = dataMap.has(element) ? dataMap.get(element) : {};\n    initialValue[key] = value;\n\n    dataMap.set(element, initialValue);\n}\n\n/**\n * Get a piece of data specific to a DOM Element. Similar to `$.data`.\n *\n * @param element - The DOM Element to lookup.\n * @param key - The key to lookup.\n * @param defaultValue - A value to use if the element or key aren't found.\n */\nexport function getData(element: Element, key: string, defaultValue?: any) {\n    if (dataMap.has(element) && dataMap.get(element)[key]) {\n        return dataMap.get(element)[key];\n    }\n\n    const attributeString = `data-${key}`;\n\n    if (element.hasAttribute(attributeString)) {\n        return element.getAttribute(attributeString);\n    }\n\n    return defaultValue;\n}\n\n/**\n * Get an HTML element from a CSS selector or DOM Node.\n *\n * @param {string|Node} selectorOrElement - A CSS selector or an HTML element.\n *\n * @throws {Error} - If no element was found.\n * @returns {HTMLElement} - An HTMLElement no matter what.\n */\nexport function ensureHtmlElement(selectorOrElement) {\n    if (typeof selectorOrElement === \"string\") {\n        selectorOrElement = document.querySelector(selectorOrElement);\n    }\n\n    if (!(selectorOrElement instanceof HTMLElement)) {\n        throw new Error(`HTMLElement could not be found for ${selectorOrElement}.`);\n    }\n\n    return selectorOrElement;\n}\n\n// Test Char for Emoji 5.0\nconst testChar = \"\\uD83E\\uDD96\"; // U+1F996 T-Rex -> update test character with new emoji version support.\n\nlet emojiSupportedCache: boolean | null = null;\n\nexport function isEmojiSupported() {\n    if (emojiSupportedCache !== null) {\n        return emojiSupportedCache;\n    }\n\n    if (process.env.NODE_ENV !== \"test\") {\n        // Test environment\n        const canvas = document.createElement(\"canvas\");\n        if (canvas.getContext && canvas.getContext(\"2d\")) {\n            const pixelRatio = window.devicePixelRatio || 1;\n            const offset = 12 * pixelRatio;\n            const ctx = canvas.getContext(\"2d\");\n            ctx!.fillStyle = \"#f00\";\n            ctx!.textBaseline = \"top\";\n            ctx!.font = \"32px Arial\";\n            ctx!.fillText(testChar, 0, 0);\n            emojiSupportedCache = ctx!.getImageData(offset, offset, 1, 1).data[0] !== 0;\n        } else {\n            emojiSupportedCache = false;\n        }\n    } else {\n        emojiSupportedCache = true;\n    }\n\n    return emojiSupportedCache;\n}\n\nconst emojiOptions = {\n    className: \"fallBackEmoji\",\n    size: \"72x72\",\n};\n\n/**\n * Returns either native emoji or fallback image\n *\n * @param stringOrNode - A DOM Node or string to convert.\n */\nexport function convertToSafeEmojiCharacters(stringOrNode: string | Node) {\n    if (isEmojiSupported()) {\n        return stringOrNode;\n    }\n    return twemoji.parse(stringOrNode, emojiOptions);\n}\n\n// A weakmap so we can store multiple load callbacks per script.\nconst loadEventCallbacks: WeakMap<Node, Array<(event) => void>> = new WeakMap();\nconst rejectionCache: Map<string, Error> = new Map();\n\n/**\n * Dynamically load a javascript file.\n */\nexport function ensureScript(scriptUrl: string) {\n    return new Promise((resolve, reject) => {\n        const existingScript: HTMLScriptElement | null = document.querySelector(`script[src='${scriptUrl}']`);\n        if (rejectionCache.has(scriptUrl)) {\n            reject(rejectionCache.get(scriptUrl));\n        }\n        if (existingScript) {\n            if (loadEventCallbacks.has(existingScript)) {\n                // Add another resolveCallback into the weakmap.\n                const callbacks = loadEventCallbacks.get(existingScript);\n                callbacks && callbacks.push(resolve);\n            } else {\n                // Script is already loaded. Resolve immediately.\n                resolve();\n            }\n        } else {\n            // The script doesn't exist. Lets create it.\n            const head = document.getElementsByTagName(\"head\")[0];\n            const script = document.createElement(\"script\");\n            script.type = \"text/javascript\";\n            script.src = scriptUrl;\n            script.onerror = (event: ErrorEvent) => {\n                const error = new Error(\"Failed to load a required embed script\");\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            };\n\n            const timeout = setTimeout(() => {\n                const error = new Error(`Loading of the script ${scriptUrl} has timed out.`);\n                rejectionCache.set(scriptUrl, error);\n                reject(error);\n            }, 10000);\n\n            loadEventCallbacks.set(script, [resolve]);\n\n            script.onload = event => {\n                clearTimeout(timeout);\n                const callbacks = loadEventCallbacks.get(script);\n                callbacks && callbacks.forEach(callback => callback(event));\n                loadEventCallbacks.delete(script);\n            };\n\n            head.appendChild(script);\n        }\n    });\n}\n\ninterface ITabbableOptions {\n    root: Element;\n    excludedElements: Element[];\n    excludedRoots: Element[];\n    reverse: boolean;\n    fromElement: Element;\n    allowLooping: boolean;\n}\n\n/**\n * Get the next tabbable item within a given tabindex.\n *\n * WARNING: Performance can be poor if you pass many excluded roots and do not\n * sufficiently narrow the tree your are looking in.\n *\n * @param options\n * @property root - The root element to look in.\n * @property excludedElements - Elements to ignore.\n * @property excludedRoots - These element's children will be ignored.\n * @property reverse - True to get the previous element instead.\n * @property fromElement - The currently focused element.\n * @property allowLooping - Whether or not the focus should loop around from beginning <-> end.\n */\nexport function getNextTabbableElement(options?: Partial<ITabbableOptions>): HTMLElement | null {\n    const defaultTabbableOptions: ITabbableOptions = {\n        root: document.documentElement,\n        excludedElements: [],\n        excludedRoots: [],\n        reverse: false,\n        fromElement: document.activeElement,\n        allowLooping: true,\n    };\n\n    // Merge the passed options and the defaults.\n    const finalOptions = {\n        ...defaultTabbableOptions,\n        ...options,\n    } as ITabbableOptions;\n\n    if (!(finalOptions.fromElement instanceof HTMLElement)) {\n        logError(\"Unable to tab to next element, `fromElement` given is not valid: \", finalOptions.fromElement);\n        return null;\n    }\n\n    const tabbables = tabbable(finalOptions.root).filter((tabbableElement: Element) => {\n        // We want to excempt items that are the active item or a parent of the active item\n        // because otherwise we would not be able to tab away from them.\n        const elementIsActiveOrChildOfActive =\n            finalOptions.fromElement === tabbableElement || tabbableElement.contains(finalOptions.fromElement);\n\n        if (!elementIsActiveOrChildOfActive) {\n            if (finalOptions.excludedElements.includes(tabbableElement)) {\n                return false;\n            }\n            for (const excludedRoot of finalOptions.excludedRoots) {\n                if (excludedRoot !== tabbableElement && excludedRoot.contains(tabbableElement)) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    });\n\n    const currentTabIndex = tabbables.indexOf(finalOptions.fromElement);\n\n    if (currentTabIndex < 0) {\n        return null;\n    }\n\n    let targetIndex = finalOptions.reverse ? currentTabIndex - 1 : currentTabIndex + 1;\n\n    if (finalOptions.allowLooping) {\n        // Loop over the beginning and ends\n        if (targetIndex < 0) {\n            targetIndex = tabbables.length - 1;\n        } else if (targetIndex >= tabbables.length) {\n            targetIndex = 0;\n        }\n    }\n\n    return tabbables[targetIndex] || null;\n}\n\nfunction checkDomTreeWasClicked(rootNode: Element | null, clickedElement: Element) {\n    return rootNode && clickedElement && (rootNode.contains(clickedElement as Element) || rootNode === clickedElement);\n}\n\n/**\n * Determine if the currently focused element is somewhere inside of (or the same as)\n * a given Element.\n *\n * @param rootNode - The root node to look in.\n */\nfunction checkDomTreeHasFocus(rootNode: Element | null, event: FocusEvent, callback: (hasFocus: boolean) => void) {\n    setTimeout(() => {\n        const possibleTargets = [\n            // NEEDS TO COME FIRST, because safari will populate relatedTarget on focusin, and its not what we're looking for.\n            document.activeElement, // IE11, Safari.\n            event.relatedTarget as Element, // Chrome (The actual standard)\n            (event as any).explicitOriginalTarget, // Firefox\n        ];\n\n        let activeElement = null;\n        for (const target of possibleTargets) {\n            if (target && target !== document.body) {\n                activeElement = target;\n                break;\n            }\n        }\n\n        if (activeElement !== null) {\n            const hasFocus =\n                rootNode && activeElement && (activeElement === rootNode || rootNode.contains(activeElement));\n\n            // We will only invalidate based on something actually getting focus.\n            callback(!!hasFocus);\n        }\n    }, 0);\n}\n\n/**\n * Register a callback for focusin and focusin out events. The main improvement here over registering\n * the listeners yourself is that the events fire for the whole tree as 1 item instead of as\n * individual notes.\n *\n * This is particularly useful when you want to track focus leaving or enterring a component\n * without caring about the individual contents inside.\n *\n * @param rootNode - The root dom node to watch on.\n * @param callback - A callback for when the tree focuses and blurs.\n */\nexport function watchFocusInDomTree(rootNode: Element, callback: (hasFocus: boolean) => void) {\n    rootNode.addEventListener(\n        \"focusout\",\n        (event: FocusEvent) => {\n            checkDomTreeHasFocus(rootNode, event, hasFocus => {\n                !hasFocus && callback(false);\n            });\n        },\n        true,\n    );\n\n    rootNode.addEventListener(\n        \"focusin\",\n        (event: FocusEvent) => {\n            checkDomTreeHasFocus(rootNode, event, hasFocus => {\n                hasFocus && callback(true);\n            });\n        },\n        true,\n    );\n\n    document.addEventListener(\"click\", event => {\n        const triggeringElement = event.target as Element;\n        const wasClicked = checkDomTreeWasClicked(rootNode, triggeringElement);\n        if (!wasClicked) {\n            callback(false);\n        }\n    });\n}\n\n/**\n * Sticky header handling\n */\nfunction handleStickyHeaderState(element, data) {\n    const goingDown = data.lastScrollPos < data.currentScrollPos;\n    const isAtTopOfPage = data.currentScrollPos === 0;\n    const elementHeight = element.offsetHeight;\n    const isPastHeader =\n        element.style.position !== \"fixed\" && element.offsetTop + elementHeight <= data.currentScrollPos;\n    const elementTop = element.style.top !== \"\" ? parseInt(element.style.top, 10) : false;\n\n    element.classList.toggle(\"isScrollingDown\", goingDown);\n    element.classList.toggle(\"isScrollingUp\", !goingDown);\n    element.classList.toggle(\"isAtTop\", isAtTopOfPage);\n\n    if (goingDown) {\n        element.style.position = \"\";\n        if (isPastHeader) {\n            element.style.top = `${data.currentScrollPos - elementHeight}px`;\n        } else {\n            if (!elementTop) {\n                element.style.top = `${data.currentScrollPos}px`;\n            }\n        }\n    } else {\n        // going UP\n        if (data.currentScrollPos <= elementTop) {\n            element.style.top = \"\";\n            element.style.position = \"fixed\";\n        }\n    }\n}\n\n/**\n * Vanilla's default way to handle sticky headers\n */\nexport function stickyHeader() {\n    const header = document.querySelector(\".stickyHeader\");\n    if (header !== null) {\n        let currentScrollPos = Math.max(window.scrollY, 0);\n        let lastScrollPos = -1;\n\n        handleStickyHeaderState(header, {\n            currentScrollPos,\n            lastScrollPos,\n        });\n\n        window.addEventListener(\"scroll\", e => {\n            debounce(\n                () => {\n                    window.requestAnimationFrame(data => {\n                        lastScrollPos = currentScrollPos;\n                        currentScrollPos = Math.max(window.scrollY, 0);\n                        handleStickyHeaderState(header, {\n                            currentScrollPos,\n                            lastScrollPos,\n                        });\n                    });\n                },\n                100,\n                {\n                    leading: true,\n                },\n            )();\n        });\n    } else {\n        utility.log(\"No sticky header found\");\n    }\n}\n\n/**\n * Handler for an file being dragged and dropped.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getDraggedImage(event: DragEvent): File | undefined {\n    if (event.dataTransfer && event.dataTransfer.files && event.dataTransfer.files.length) {\n        event.preventDefault();\n        const files = Array.from(event.dataTransfer.files);\n\n        // Currently only 1 file is supported.\n        const mainFile = files[0];\n        return mainFile;\n    }\n}\n\n/**\n * Handler for an file being pasted.\n *\n * @param event - https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\n */\nexport function getPastedImage(event: ClipboardEvent): File | undefined | null {\n    if (event.clipboardData && event.clipboardData.items && event.clipboardData.items.length) {\n        const files = Array.from(event.clipboardData.items)\n            .map((item: any) => (item.getAsFile ? item.getAsFile() : null))\n            .filter(Boolean);\n\n        if (files.length > 0) {\n            event.preventDefault();\n            // Currently only 1 file is supported.\n            const mainFile = files[0];\n            return mainFile;\n        }\n    }\n}\n\n/**\n * Calculate the height of element with simulated margin collapse.\n *\n * This is ideal for getting the calculate height of a fixed number of items. (not the entire parent).\n *\n * It considers:\n * - Element height\n * - Padding\n * - Borders\n * - Margins\n * - Margin collapsing.\n *\n * @param element - The element to measure\n * @param previousBottomMargin - The bottom margin of the previous element. You can use the returned bottom margin from this function to get this.\n */\nexport function getElementHeight(\n    element: Element,\n    previousBottomMargin: number = 0,\n): {\n    height: number;\n    bottomMargin: number;\n} {\n    const height = element.getBoundingClientRect().height;\n    const { marginTop, marginBottom } = window.getComputedStyle(element);\n\n    let topHeight = marginTop ? parseInt(marginTop, 10) : 0;\n    // Simulate a margin-collapsed height.\n    topHeight = Math.max(topHeight - previousBottomMargin, 0);\n\n    const bottomHeight = marginBottom ? parseInt(marginBottom, 10) : 0;\n    const finalHeight = height + topHeight + bottomHeight;\n\n    return {\n        height: finalHeight,\n        bottomMargin: bottomHeight,\n    };\n}\n","(function(window) {\n    var re = {\n        not_string: /[^s]/,\n        number: /[diefg]/,\n        json: /[j]/,\n        not_json: /[^j]/,\n        text: /^[^\\x25]+/,\n        modulo: /^\\x25{2}/,\n        placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijosuxX])/,\n        key: /^([a-z_][a-z_\\d]*)/i,\n        key_access: /^\\.([a-z_][a-z_\\d]*)/i,\n        index_access: /^\\[(\\d+)\\]/,\n        sign: /^[\\+\\-]/\n    }\n\n    function sprintf() {\n        var key = arguments[0], cache = sprintf.cache\n        if (!(cache[key] && cache.hasOwnProperty(key))) {\n            cache[key] = sprintf.parse(key)\n        }\n        return sprintf.format.call(null, cache[key], arguments)\n    }\n\n    sprintf.format = function(parse_tree, argv) {\n        var cursor = 1, tree_length = parse_tree.length, node_type = \"\", arg, output = [], i, k, match, pad, pad_character, pad_length, is_positive = true, sign = \"\"\n        for (i = 0; i < tree_length; i++) {\n            node_type = get_type(parse_tree[i])\n            if (node_type === \"string\") {\n                output[output.length] = parse_tree[i]\n            }\n            else if (node_type === \"array\") {\n                match = parse_tree[i] // convenience purposes only\n                if (match[2]) { // keyword argument\n                    arg = argv[cursor]\n                    for (k = 0; k < match[2].length; k++) {\n                        if (!arg.hasOwnProperty(match[2][k])) {\n                            throw new Error(sprintf(\"[sprintf] property '%s' does not exist\", match[2][k]))\n                        }\n                        arg = arg[match[2][k]]\n                    }\n                }\n                else if (match[1]) { // positional argument (explicit)\n                    arg = argv[match[1]]\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++]\n                }\n\n                if (get_type(arg) == \"function\") {\n                    arg = arg()\n                }\n\n                if (re.not_string.test(match[8]) && re.not_json.test(match[8]) && (get_type(arg) != \"number\" && isNaN(arg))) {\n                    throw new TypeError(sprintf(\"[sprintf] expecting number but found %s\", get_type(arg)))\n                }\n\n                if (re.number.test(match[8])) {\n                    is_positive = arg >= 0\n                }\n\n                switch (match[8]) {\n                    case \"b\":\n                        arg = arg.toString(2)\n                    break\n                    case \"c\":\n                        arg = String.fromCharCode(arg)\n                    break\n                    case \"d\":\n                    case \"i\":\n                        arg = parseInt(arg, 10)\n                    break\n                    case \"j\":\n                        arg = JSON.stringify(arg, null, match[6] ? parseInt(match[6]) : 0)\n                    break\n                    case \"e\":\n                        arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential()\n                    break\n                    case \"f\":\n                        arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg)\n                    break\n                    case \"g\":\n                        arg = match[7] ? parseFloat(arg).toPrecision(match[7]) : parseFloat(arg)\n                    break\n                    case \"o\":\n                        arg = arg.toString(8)\n                    break\n                    case \"s\":\n                        arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg)\n                    break\n                    case \"u\":\n                        arg = arg >>> 0\n                    break\n                    case \"x\":\n                        arg = arg.toString(16)\n                    break\n                    case \"X\":\n                        arg = arg.toString(16).toUpperCase()\n                    break\n                }\n                if (re.json.test(match[8])) {\n                    output[output.length] = arg\n                }\n                else {\n                    if (re.number.test(match[8]) && (!is_positive || match[3])) {\n                        sign = is_positive ? \"+\" : \"-\"\n                        arg = arg.toString().replace(re.sign, \"\")\n                    }\n                    else {\n                        sign = \"\"\n                    }\n                    pad_character = match[4] ? match[4] === \"0\" ? \"0\" : match[4].charAt(1) : \" \"\n                    pad_length = match[6] - (sign + arg).length\n                    pad = match[6] ? (pad_length > 0 ? str_repeat(pad_character, pad_length) : \"\") : \"\"\n                    output[output.length] = match[5] ? sign + arg + pad : (pad_character === \"0\" ? sign + pad + arg : pad + sign + arg)\n                }\n            }\n        }\n        return output.join(\"\")\n    }\n\n    sprintf.cache = {}\n\n    sprintf.parse = function(fmt) {\n        var _fmt = fmt, match = [], parse_tree = [], arg_names = 0\n        while (_fmt) {\n            if ((match = re.text.exec(_fmt)) !== null) {\n                parse_tree[parse_tree.length] = match[0]\n            }\n            else if ((match = re.modulo.exec(_fmt)) !== null) {\n                parse_tree[parse_tree.length] = \"%\"\n            }\n            else if ((match = re.placeholder.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1\n                    var field_list = [], replacement_field = match[2], field_match = []\n                    if ((field_match = re.key.exec(replacement_field)) !== null) {\n                        field_list[field_list.length] = field_match[1]\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== \"\") {\n                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {\n                                field_list[field_list.length] = field_match[1]\n                            }\n                            else if ((field_match = re.index_access.exec(replacement_field)) !== null) {\n                                field_list[field_list.length] = field_match[1]\n                            }\n                            else {\n                                throw new SyntaxError(\"[sprintf] failed to parse named argument key\")\n                            }\n                        }\n                    }\n                    else {\n                        throw new SyntaxError(\"[sprintf] failed to parse named argument key\")\n                    }\n                    match[2] = field_list\n                }\n                else {\n                    arg_names |= 2\n                }\n                if (arg_names === 3) {\n                    throw new Error(\"[sprintf] mixing positional and named placeholders is not (yet) supported\")\n                }\n                parse_tree[parse_tree.length] = match\n            }\n            else {\n                throw new SyntaxError(\"[sprintf] unexpected placeholder\")\n            }\n            _fmt = _fmt.substring(match[0].length)\n        }\n        return parse_tree\n    }\n\n    var vsprintf = function(fmt, argv, _argv) {\n        _argv = (argv || []).slice(0)\n        _argv.splice(0, 0, fmt)\n        return sprintf.apply(null, _argv)\n    }\n\n    /**\n     * helpers\n     */\n    function get_type(variable) {\n        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase()\n    }\n\n    function str_repeat(input, multiplier) {\n        return Array(multiplier + 1).join(input)\n    }\n\n    /**\n     * export to either browser or node.js\n     */\n    if (typeof exports !== \"undefined\") {\n        exports.sprintf = sprintf\n        exports.vsprintf = vsprintf\n    }\n    else {\n        window.sprintf = sprintf\n        window.vsprintf = vsprintf\n\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return {\n                    sprintf: sprintf,\n                    vsprintf: vsprintf\n                }\n            })\n        }\n    }\n})(typeof window === \"undefined\" ? this : window);\n","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"invariant\";\nimport { createLocation } from \"history\";\n\nvar isModifiedEvent = function isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n};\n\n/**\n * The public API for rendering a history-aware <a>.\n */\n\nvar Link = function (_React$Component) {\n  _inherits(Link, _React$Component);\n\n  function Link() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Link);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.handleClick = function (event) {\n      if (_this.props.onClick) _this.props.onClick(event);\n\n      if (!event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      !_this.props.target && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n      ) {\n          event.preventDefault();\n\n          var history = _this.context.router.history;\n          var _this$props = _this.props,\n              replace = _this$props.replace,\n              to = _this$props.to;\n\n\n          if (replace) {\n            history.replace(to);\n          } else {\n            history.push(to);\n          }\n        }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Link.prototype.render = function render() {\n    var _props = this.props,\n        replace = _props.replace,\n        to = _props.to,\n        innerRef = _props.innerRef,\n        props = _objectWithoutProperties(_props, [\"replace\", \"to\", \"innerRef\"]); // eslint-disable-line no-unused-vars\n\n    invariant(this.context.router, \"You should not use <Link> outside a <Router>\");\n\n    invariant(to !== undefined, 'You must specify the \"to\" property');\n\n    var history = this.context.router.history;\n\n    var location = typeof to === \"string\" ? createLocation(to, null, null, history.location) : to;\n\n    var href = history.createHref(location);\n    return React.createElement(\"a\", _extends({}, props, { onClick: this.handleClick, href: href, ref: innerRef }));\n  };\n\n  return Link;\n}(React.Component);\n\nLink.propTypes = {\n  onClick: PropTypes.func,\n  target: PropTypes.string,\n  replace: PropTypes.bool,\n  to: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  innerRef: PropTypes.oneOfType([PropTypes.string, PropTypes.func])\n};\nLink.defaultProps = {\n  replace: false\n};\nLink.contextTypes = {\n  router: PropTypes.shape({\n    history: PropTypes.shape({\n      push: PropTypes.func.isRequired,\n      replace: PropTypes.func.isRequired,\n      createHref: PropTypes.func.isRequired\n    }).isRequired\n  }).isRequired\n};\n\n\nexport default Link;","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { IEmbedData, IEmbedElements, registerEmbedRenderer } from \"@dashboard/embeds\";\nimport { ensureScript } from \"@dashboard/dom\";\nimport { onContent, onReady } from \"@dashboard/application\";\nimport { IScrapeData } from \"@dashboard/@types/api\";\n\nexport function initGettyEmbeds() {\n    registerEmbedRenderer(\"getty\", renderGetty);\n    onReady(convertGettyEmbeds);\n    onContent(convertGettyEmbeds);\n}\n\n/**\n * Render a single getty embed.\n */\nexport async function renderGetty(elements: IEmbedElements, data: IScrapeData) {\n    const contentElement = elements.content;\n    const url = data.attributes.post;\n    const newLink = document.createElement(\"a\");\n    newLink.classList.add(\"gie-single\");\n    newLink.setAttribute(\"href\", \"http://www.gettyimages.ca/detail/\" + url);\n    newLink.setAttribute(\"id\", data.attributes.id);\n    contentElement.style.width = `${data.width}px`;\n    contentElement.appendChild(newLink);\n    setImmediate(() => {\n        void loadGettyImages(data);\n    });\n}\n\n/**\n * Renders posted getty embeds.\n */\nexport async function convertGettyEmbeds() {\n    const gettyPosts = document.querySelectorAll(\".js-gettyEmbed\");\n    if (gettyPosts.length > 0) {\n        for (const post of gettyPosts) {\n            const url = post.getAttribute(\"href\") || \"\";\n            const id = post.getAttribute(\"id\");\n            const sig = post.getAttribute(\"data-sig\");\n            const height = Number(post.getAttribute(\"data-height\")) || 1;\n            const width = Number(post.getAttribute(\"data-width\")) || 1;\n            const items = post.getAttribute(\"data-items\");\n            const capt = post.getAttribute(\"data-capt\");\n            const tld = post.getAttribute(\"data-tld\");\n            const i360 = post.getAttribute(\"data-is360\");\n            const data: IEmbedData = {\n                type: \"getty\",\n                url,\n                height,\n                width,\n                attributes: { id, sig, items, capt, tld, i360 },\n            };\n            await loadGettyImages(data);\n            post.classList.remove(\"js-gettyEmbed\");\n        }\n    }\n}\n\n/**\n * Loads getty embeds into a global object and fire getty's widget.js.\n * @param data\n * @returns {Promise<void>}\n */\nasync function loadGettyImages(data) {\n    const fallbackCallback = c => {\n        (window.gie.q = window.gie.q || []).push(c);\n    };\n    // This is part of Getty's embed code, we need to ensure embeds are loaded and sent to their widget.js script.\n    window.gie = window.gie || fallbackCallback;\n\n    window.gie(() => {\n        window.gie.widgets.load({\n            id: data.attributes.id,\n            sig: data.attributes.sig,\n            w: data.width + \"px\",\n            h: data.height + \"px\",\n            items: data.attributes.items,\n            caption: data.attributes.isCaptioned,\n            tld: data.attributes.tld,\n            is360: data.attributes.is360,\n        });\n    });\n\n    /// DO NOT IGNORE\n    /// This will turn totally sideways if window.gie is not populated before the script is initially loaded.\n    await ensureScript(\"//embed-cdn.gettyimages.com/widgets.js\");\n}\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var location = global.location || {};\n/*jslint indent: 2, browser: true, bitwise: true, plusplus: true */\nvar twemoji = (function (\n  /*! Copyright Twitter Inc. and other contributors. Licensed under MIT *//*\n    https://github.com/twitter/twemoji/blob/gh-pages/LICENSE\n  */\n\n  // WARNING:   this file is generated automatically via\n  //            `node twemoji-generator.js`\n  //            please update its `createTwemoji` function\n  //            at the bottom of the same file instead.\n\n) {\n  'use strict';\n\n  /*jshint maxparams:4 */\n\n  var\n    // the exported module object\n    twemoji = {\n\n\n    /////////////////////////\n    //      properties     //\n    /////////////////////////\n\n      // default assets url, by default will be Twitter Inc. CDN\n      base: 'https://twemoji.maxcdn.com/2/',\n\n      // default assets file extensions, by default '.png'\n      ext: '.png',\n\n      // default assets/folder size, by default \"72x72\"\n      // available via Twitter CDN: 72\n      size: '72x72',\n\n      // default class name, by default 'emoji'\n      className: 'emoji',\n\n      // basic utilities / helpers to convert code points\n      // to JavaScript surrogates and vice versa\n      convert: {\n\n        /**\n         * Given an HEX codepoint, returns UTF16 surrogate pairs.\n         *\n         * @param   string  generic codepoint, i.e. '1F4A9'\n         * @return  string  codepoint transformed into utf16 surrogates pair,\n         *          i.e. \\uD83D\\uDCA9\n         *\n         * @example\n         *  twemoji.convert.fromCodePoint('1f1e8');\n         *  // \"\\ud83c\\udde8\"\n         *\n         *  '1f1e8-1f1f3'.split('-').map(twemoji.convert.fromCodePoint).join('')\n         *  // \"\\ud83c\\udde8\\ud83c\\uddf3\"\n         */\n        fromCodePoint: fromCodePoint,\n\n        /**\n         * Given UTF16 surrogate pairs, returns the equivalent HEX codepoint.\n         *\n         * @param   string  generic utf16 surrogates pair, i.e. \\uD83D\\uDCA9\n         * @param   string  optional separator for double code points, default='-'\n         * @return  string  utf16 transformed into codepoint, i.e. '1F4A9'\n         *\n         * @example\n         *  twemoji.convert.toCodePoint('\\ud83c\\udde8\\ud83c\\uddf3');\n         *  // \"1f1e8-1f1f3\"\n         *\n         *  twemoji.convert.toCodePoint('\\ud83c\\udde8\\ud83c\\uddf3', '~');\n         *  // \"1f1e8~1f1f3\"\n         */\n        toCodePoint: toCodePoint\n      },\n\n\n    /////////////////////////\n    //       methods       //\n    /////////////////////////\n\n      /**\n       * User first: used to remove missing images\n       * preserving the original text intent when\n       * a fallback for network problems is desired.\n       * Automatically added to Image nodes via DOM\n       * It could be recycled for string operations via:\n       *  $('img.emoji').on('error', twemoji.onerror)\n       */\n      onerror: function onerror() {\n        if (this.parentNode) {\n          this.parentNode.replaceChild(createText(this.alt, false), this);\n        }\n      },\n\n      /**\n       * Main method/logic to generate either <img> tags or HTMLImage nodes.\n       *  \"emojify\" a generic text or DOM Element.\n       *\n       * @overloads\n       *\n       * String replacement for `innerHTML` or server side operations\n       *  twemoji.parse(string);\n       *  twemoji.parse(string, Function);\n       *  twemoji.parse(string, Object);\n       *\n       * HTMLElement tree parsing for safer operations over existing DOM\n       *  twemoji.parse(HTMLElement);\n       *  twemoji.parse(HTMLElement, Function);\n       *  twemoji.parse(HTMLElement, Object);\n       *\n       * @param   string|HTMLElement  the source to parse and enrich with emoji.\n       *\n       *          string              replace emoji matches with <img> tags.\n       *                              Mainly used to inject emoji via `innerHTML`\n       *                              It does **not** parse the string or validate it,\n       *                              it simply replaces found emoji with a tag.\n       *                              NOTE: be sure this won't affect security.\n       *\n       *          HTMLElement         walk through the DOM tree and find emoji\n       *                              that are inside **text node only** (nodeType === 3)\n       *                              Mainly used to put emoji in already generated DOM\n       *                              without compromising surrounding nodes and\n       *                              **avoiding** the usage of `innerHTML`.\n       *                              NOTE: Using DOM elements instead of strings should\n       *                              improve security without compromising too much\n       *                              performance compared with a less safe `innerHTML`.\n       *\n       * @param   Function|Object  [optional]\n       *                              either the callback that will be invoked or an object\n       *                              with all properties to use per each found emoji.\n       *\n       *          Function            if specified, this will be invoked per each emoji\n       *                              that has been found through the RegExp except\n       *                              those follwed by the invariant \\uFE0E (\"as text\").\n       *                              Once invoked, parameters will be:\n       *\n       *                                iconId:string     the lower case HEX code point\n       *                                                  i.e. \"1f4a9\"\n       *\n       *                                options:Object    all info for this parsing operation\n       *\n       *                                variant:char      the optional \\uFE0F (\"as image\")\n       *                                                  variant, in case this info\n       *                                                  is anyhow meaningful.\n       *                                                  By default this is ignored.\n       *\n       *                              If such callback will return a falsy value instead\n       *                              of a valid `src` to use for the image, nothing will\n       *                              actually change for that specific emoji.\n       *\n       *\n       *          Object              if specified, an object containing the following properties\n       *\n       *            callback   Function  the callback to invoke per each found emoji.\n       *            base       string    the base url, by default twemoji.base\n       *            ext        string    the image extension, by default twemoji.ext\n       *            size       string    the assets size, by default twemoji.size\n       *\n       * @example\n       *\n       *  twemoji.parse(\"I \\u2764\\uFE0F emoji!\");\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"\" src=\"/assets/2764.gif\"/> emoji!\n       *\n       *\n       *  twemoji.parse(\"I \\u2764\\uFE0F emoji!\", function(iconId, options) {\n       *    return '/assets/' + iconId + '.gif';\n       *  });\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"\" src=\"/assets/2764.gif\"/> emoji!\n       *\n       *\n       * twemoji.parse(\"I \\u2764\\uFE0F emoji!\", {\n       *   size: 72,\n       *   callback: function(iconId, options) {\n       *     return '/assets/' + options.size + '/' + iconId + options.ext;\n       *   }\n       * });\n       *  // I <img class=\"emoji\" draggable=\"false\" alt=\"\" src=\"/assets/72x72/2764.png\"/> emoji!\n       *\n       */\n      parse: parse,\n\n      /**\n       * Given a string, invokes the callback argument\n       *  per each emoji found in such string.\n       * This is the most raw version used by\n       *  the .parse(string) method itself.\n       *\n       * @param   string    generic string to parse\n       * @param   Function  a generic callback that will be\n       *                    invoked to replace the content.\n       *                    This calback wil receive standard\n       *                    String.prototype.replace(str, callback)\n       *                    arguments such:\n       *  callback(\n       *    rawText,  // the emoji match\n       *  );\n       *\n       *                    and others commonly received via replace.\n       */\n      replace: replace,\n\n      /**\n       * Simplify string tests against emoji.\n       *\n       * @param   string  some text that might contain emoji\n       * @return  boolean true if any emoji was found, false otherwise.\n       *\n       * @example\n       *\n       *  if (twemoji.test(someContent)) {\n       *    console.log(\"emoji All The Things!\");\n       *  }\n       */\n      test: test\n    },\n\n    // used to escape HTML special chars in attributes\n    escaper = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      \"'\": '&#39;',\n      '\"': '&quot;'\n    },\n\n    // RegExp based on emoji's official Unicode standards\n    // http://www.unicode.org/Public/UNIDATA/EmojiSources.txt\n    re = /\\ud83d[\\udc68-\\udc69](?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f|\\u2696\\ufe0f|\\u2708\\ufe0f|\\ud83c[\\udf3e\\udf73\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)(?:\\ufe0f|\\ud83c[\\udffb-\\udfff])\\u200d[\\u2640\\u2642]\\ufe0f|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f\\u200d\\ud83d\\udc68|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\u2764\\ufe0f\\u200d\\ud83d[\\udc68\\udc69]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f\\u200d\\ud83c\\udf08|\\ud83c\\udff4\\u200d\\u2620\\ufe0f|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f|\\ud83e\\uddde\\u200d\\u2640\\ufe0f|\\ud83e\\uddde\\u200d\\u2642\\ufe0f|\\ud83e\\udddf\\u200d\\u2640\\ufe0f|\\ud83e\\udddf\\u200d\\u2642\\ufe0f|(?:\\u002a)\\ufe0f?\\u20e3|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca-\\udfcc]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd74\\udd75\\udd7a\\udd90\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\uddd1-\\udddd]|[\\u261d\\u26f7\\u26f9\\u270a-\\u270d])(?:\\ud83c[\\udffb-\\udfff]|)|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\u0023\\u20e3|\\u0030\\u20e3|\\u0031\\u20e3|\\u0032\\u20e3|\\u0033\\u20e3|\\u0034\\u20e3|\\u0035\\u20e3|\\u0036\\u20e3|\\u0037\\u20e3|\\u0038\\u20e3|\\u0039\\u20e3|\\ud800\\udc00|\\ud83c[\\udc04\\udccf\\udd70\\udd71\\udd7e\\udd7f\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude02\\ude1a\\ude2f\\ude32-\\ude3a\\ude50\\ude51\\udf00-\\udf21\\udf24-\\udf84\\udf86-\\udf93\\udf96\\udf97\\udf99-\\udf9b\\udf9e-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcd-\\udff0\\udff3-\\udff5\\udff7-\\udfff]|\\ud83d[\\udc00-\\udc41\\udc44\\udc45\\udc51-\\udc65\\udc6a-\\udc6d\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udca9\\udcab-\\udcfd\\udcff-\\udd3d\\udd49-\\udd4e\\udd50-\\udd67\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda4\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\udecb\\udecd-\\uded2\\udee0-\\udee5\\udee9\\udeeb\\udeec\\udef0\\udef3-\\udef8]|\\ud83e[\\udd10-\\udd17\\udd1d\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd40-\\udd45\\udd47-\\udd4c\\udd50-\\udd6b\\udd80-\\udd97\\uddc0\\uddd0\\uddde-\\udde6]|[\\u00a9\\u00ae\\u203c\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23e9-\\u23f3\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26ce\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2705\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274c\\u274e\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27a1\\u27b0\\u27bf\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299\\ue50a]|(?:\\u2639)(?:\\ufe0f|(?!\\ufe0e))/g,\n\n    // avoid runtime RegExp creation for not so smart,\n    // not JIT based, and old browsers / engines\n    UFE0Fg = /\\uFE0F/g,\n\n    // avoid using a string literal like '\\u200D' here because minifiers expand it inline\n    U200D = String.fromCharCode(0x200D),\n\n    // used to find HTML special chars in attributes\n    rescaper = /[&<>'\"]/g,\n\n    // nodes with type 1 which should **not** be parsed\n    shouldntBeParsed = /^(?:iframe|noframes|noscript|script|select|style|textarea)$/,\n\n    // just a private shortcut\n    fromCharCode = String.fromCharCode;\n\n  return twemoji;\n\n\n  /////////////////////////\n  //  private functions  //\n  //     declaration     //\n  /////////////////////////\n\n  /**\n   * Shortcut to create text nodes\n   * @param   string  text used to create DOM text node\n   * @return  Node  a DOM node with that text\n   */\n  function createText(text, clean) {\n    return document.createTextNode(clean ? text.replace(UFE0Fg, '') : text);\n  }\n\n  /**\n   * Utility function to escape html attribute text\n   * @param   string  text use in HTML attribute\n   * @return  string  text encoded to use in HTML attribute\n   */\n  function escapeHTML(s) {\n    return s.replace(rescaper, replacer);\n  }\n\n  /**\n   * Default callback used to generate emoji src\n   *  based on Twitter CDN\n   * @param   string    the emoji codepoint string\n   * @param   string    the default size to use, i.e. \"36x36\"\n   * @return  string    the image source to use\n   */\n  function defaultImageSrcGenerator(icon, options) {\n    return ''.concat(options.base, options.size, '/', icon, options.ext);\n  }\n\n  /**\n   * Given a generic DOM nodeType 1, walk through all children\n   * and store every nodeType 3 (#text) found in the tree.\n   * @param   Element a DOM Element with probably some text in it\n   * @param   Array the list of previously discovered text nodes\n   * @return  Array same list with new discovered nodes, if any\n   */\n  function grabAllTextNodes(node, allText) {\n    var\n      childNodes = node.childNodes,\n      length = childNodes.length,\n      subnode,\n      nodeType;\n    while (length--) {\n      subnode = childNodes[length];\n      nodeType = subnode.nodeType;\n      // parse emoji only in text nodes\n      if (nodeType === 3) {\n        // collect them to process emoji later\n        allText.push(subnode);\n      }\n      // ignore all nodes that are not type 1, that are svg, or that\n      // should not be parsed as script, style, and others\n      else if (nodeType === 1 && !('ownerSVGElement' in subnode) &&\n          !shouldntBeParsed.test(subnode.nodeName.toLowerCase())) {\n        grabAllTextNodes(subnode, allText);\n      }\n    }\n    return allText;\n  }\n\n  /**\n   * Used to both remove the possible variant\n   *  and to convert utf16 into code points.\n   *  If there is a zero-width-joiner (U+200D), leave the variants in.\n   * @param   string    the raw text of the emoji match\n   * @return  string    the code point\n   */\n  function grabTheRightIcon(rawText) {\n    // if variant is present as \\uFE0F\n    return toCodePoint(rawText.indexOf(U200D) < 0 ?\n      rawText.replace(UFE0Fg, '') :\n      rawText\n    );\n  }\n\n  /**\n   * DOM version of the same logic / parser:\n   *  emojify all found sub-text nodes placing images node instead.\n   * @param   Element   generic DOM node with some text in some child node\n   * @param   Object    options  containing info about how to parse\n    *\n    *            .callback   Function  the callback to invoke per each found emoji.\n    *            .base       string    the base url, by default twemoji.base\n    *            .ext        string    the image extension, by default twemoji.ext\n    *            .size       string    the assets size, by default twemoji.size\n    *\n   * @return  Element same generic node with emoji in place, if any.\n   */\n  function parseNode(node, options) {\n    var\n      allText = grabAllTextNodes(node, []),\n      length = allText.length,\n      attrib,\n      attrname,\n      modified,\n      fragment,\n      subnode,\n      text,\n      match,\n      i,\n      index,\n      img,\n      rawText,\n      iconId,\n      src;\n    while (length--) {\n      modified = false;\n      fragment = document.createDocumentFragment();\n      subnode = allText[length];\n      text = subnode.nodeValue;\n      i = 0;\n      while ((match = re.exec(text))) {\n        index = match.index;\n        if (index !== i) {\n          fragment.appendChild(\n            createText(text.slice(i, index), true)\n          );\n        }\n        rawText = match[0];\n        iconId = grabTheRightIcon(rawText);\n        i = index + rawText.length;\n        src = options.callback(iconId, options);\n        if (src) {\n          img = new Image();\n          img.onerror = options.onerror;\n          img.setAttribute('draggable', 'false');\n          attrib = options.attributes(rawText, iconId);\n          for (attrname in attrib) {\n            if (\n              attrib.hasOwnProperty(attrname) &&\n              // don't allow any handlers to be set + don't allow overrides\n              attrname.indexOf('on') !== 0 &&\n              !img.hasAttribute(attrname)\n            ) {\n              img.setAttribute(attrname, attrib[attrname]);\n            }\n          }\n          img.className = options.className;\n          img.alt = rawText;\n          img.src = src;\n          modified = true;\n          fragment.appendChild(img);\n        }\n        if (!img) fragment.appendChild(createText(rawText, false));\n        img = null;\n      }\n      // is there actually anything to replace in here ?\n      if (modified) {\n        // any text left to be added ?\n        if (i < text.length) {\n          fragment.appendChild(\n            createText(text.slice(i), true)\n          );\n        }\n        // replace the text node only, leave intact\n        // anything else surrounding such text\n        subnode.parentNode.replaceChild(fragment, subnode);\n      }\n    }\n    return node;\n  }\n\n  /**\n   * String/HTML version of the same logic / parser:\n   *  emojify a generic text placing images tags instead of surrogates pair.\n   * @param   string    generic string with possibly some emoji in it\n   * @param   Object    options  containing info about how to parse\n   *\n   *            .callback   Function  the callback to invoke per each found emoji.\n   *            .base       string    the base url, by default twemoji.base\n   *            .ext        string    the image extension, by default twemoji.ext\n   *            .size       string    the assets size, by default twemoji.size\n   *\n   * @return  the string with <img tags> replacing all found and parsed emoji\n   */\n  function parseString(str, options) {\n    return replace(str, function (rawText) {\n      var\n        ret = rawText,\n        iconId = grabTheRightIcon(rawText),\n        src = options.callback(iconId, options),\n        attrib,\n        attrname;\n      if (src) {\n        // recycle the match string replacing the emoji\n        // with its image counter part\n        ret = '<img '.concat(\n          'class=\"', options.className, '\" ',\n          'draggable=\"false\" ',\n          // needs to preserve user original intent\n          // when variants should be copied and pasted too\n          'alt=\"',\n          rawText,\n          '\"',\n          ' src=\"',\n          src,\n          '\"'\n        );\n        attrib = options.attributes(rawText, iconId);\n        for (attrname in attrib) {\n          if (\n            attrib.hasOwnProperty(attrname) &&\n            // don't allow any handlers to be set + don't allow overrides\n            attrname.indexOf('on') !== 0 &&\n            ret.indexOf(' ' + attrname + '=') === -1\n          ) {\n            ret = ret.concat(' ', attrname, '=\"', escapeHTML(attrib[attrname]), '\"');\n          }\n        }\n        ret = ret.concat('/>');\n      }\n      return ret;\n    });\n  }\n\n  /**\n   * Function used to actually replace HTML special chars\n   * @param   string  HTML special char\n   * @return  string  encoded HTML special char\n   */\n  function replacer(m) {\n    return escaper[m];\n  }\n\n  /**\n   * Default options.attribute callback\n   * @return  null\n   */\n  function returnNull() {\n    return null;\n  }\n\n  /**\n   * Given a generic value, creates its squared counterpart if it's a number.\n   *  As example, number 36 will return '36x36'.\n   * @param   any     a generic value.\n   * @return  any     a string representing asset size, i.e. \"36x36\"\n   *                  only in case the value was a number.\n   *                  Returns initial value otherwise.\n   */\n  function toSizeSquaredAsset(value) {\n    return typeof value === 'number' ?\n      value + 'x' + value :\n      value;\n  }\n\n\n  /////////////////////////\n  //  exported functions //\n  //     declaration     //\n  /////////////////////////\n\n  function fromCodePoint(codepoint) {\n    var code = typeof codepoint === 'string' ?\n          parseInt(codepoint, 16) : codepoint;\n    if (code < 0x10000) {\n      return fromCharCode(code);\n    }\n    code -= 0x10000;\n    return fromCharCode(\n      0xD800 + (code >> 10),\n      0xDC00 + (code & 0x3FF)\n    );\n  }\n\n  function parse(what, how) {\n    if (!how || typeof how === 'function') {\n      how = {callback: how};\n    }\n    // if first argument is string, inject html <img> tags\n    // otherwise use the DOM tree and parse text nodes only\n    return (typeof what === 'string' ? parseString : parseNode)(what, {\n      callback:   how.callback || defaultImageSrcGenerator,\n      attributes: typeof how.attributes === 'function' ? how.attributes : returnNull,\n      base:       typeof how.base === 'string' ? how.base : twemoji.base,\n      ext:        how.ext || twemoji.ext,\n      size:       how.folder || toSizeSquaredAsset(how.size || twemoji.size),\n      className:  how.className || twemoji.className,\n      onerror:    how.onerror || twemoji.onerror\n    });\n  }\n\n  function replace(text, callback) {\n    return String(text).replace(re, callback);\n  }\n\n  function test(text) {\n    // IE6 needs a reset before too\n    re.lastIndex = 0;\n    var result = re.test(text);\n    re.lastIndex = 0;\n    return result;\n  }\n\n  function toCodePoint(unicodeSurrogates, sep) {\n    var\n      r = [],\n      c = 0,\n      p = 0,\n      i = 0;\n    while (i < unicodeSurrogates.length) {\n      c = unicodeSurrogates.charCodeAt(i++);\n      if (p) {\n        r.push((0x10000 + ((p - 0xD800) << 10) + (c - 0xDC00)).toString(16));\n        p = 0;\n      } else if (0xD800 <= c && c <= 0xDBFF) {\n        p = c;\n      } else {\n        r.push(c.toString(16));\n      }\n    }\n    return r.join(sep || '-');\n  }\n\n}());\nif (!location.protocol) {\n  twemoji.base = twemoji.base.replace(/^http:/, \"\");\n}\nmodule.exports = twemoji;","module.exports = function(el, options) {\n  options = options || {};\n\n  var elementDocument = el.ownerDocument || el;\n  var basicTabbables = [];\n  var orderedTabbables = [];\n\n  // A node is \"available\" if\n  // - it's computed style\n  var isUnavailable = createIsUnavailable(elementDocument);\n\n  var candidateSelectors = [\n    'input',\n    'select',\n    'a[href]',\n    'textarea',\n    'button',\n    '[tabindex]',\n  ];\n\n  var candidates = el.querySelectorAll(candidateSelectors.join(','));\n\n  if (options.includeContainer) {\n    var matches = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\n    if (\n      candidateSelectors.some(function(candidateSelector) {\n        return matches.call(el, candidateSelector);\n      })\n    ) {\n      candidates = Array.prototype.slice.apply(candidates);\n      candidates.unshift(el);\n    }\n  }\n\n  var candidate, candidateIndexAttr, candidateIndex;\n  for (var i = 0, l = candidates.length; i < l; i++) {\n    candidate = candidates[i];\n    candidateIndexAttr = parseInt(candidate.getAttribute('tabindex'), 10)\n    candidateIndex = isNaN(candidateIndexAttr) ? candidate.tabIndex : candidateIndexAttr;\n\n    if (\n      candidateIndex < 0\n      || (candidate.tagName === 'INPUT' && candidate.type === 'hidden')\n      || candidate.disabled\n      || isUnavailable(candidate, elementDocument)\n    ) {\n      continue;\n    }\n\n    if (candidateIndex === 0) {\n      basicTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        index: i,\n        tabIndex: candidateIndex,\n        node: candidate,\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables\n    .sort(function(a, b) {\n      return a.tabIndex === b.tabIndex ? a.index - b.index : a.tabIndex - b.tabIndex;\n    })\n    .map(function(a) {\n      return a.node\n    });\n\n  Array.prototype.push.apply(tabbableNodes, basicTabbables);\n\n  return tabbableNodes;\n}\n\nfunction createIsUnavailable(elementDocument) {\n  // Node cache must be refreshed on every check, in case\n  // the content of the element has changed\n  var isOffCache = [];\n\n  // \"off\" means `display: none;`, as opposed to \"hidden\",\n  // which means `visibility: hidden;`. getComputedStyle\n  // accurately reflects visiblity in context but not\n  // \"off\" state, so we need to recursively check parents.\n\n  function isOff(node, nodeComputedStyle) {\n    if (node === elementDocument.documentElement) return false;\n\n    // Find the cached node (Array.prototype.find not available in IE9)\n    for (var i = 0, length = isOffCache.length; i < length; i++) {\n      if (isOffCache[i][0] === node) return isOffCache[i][1];\n    }\n\n    nodeComputedStyle = nodeComputedStyle || elementDocument.defaultView.getComputedStyle(node);\n\n    var result = false;\n\n    if (nodeComputedStyle.display === 'none') {\n      result = true;\n    } else if (node.parentNode) {\n      result = isOff(node.parentNode);\n    }\n\n    isOffCache.push([node, result]);\n\n    return result;\n  }\n\n  return function isUnavailable(node) {\n    if (node === elementDocument.documentElement) return false;\n\n    var computedStyle = elementDocument.defaultView.getComputedStyle(node);\n\n    if (isOff(node, computedStyle)) return true;\n\n    return computedStyle.visibility === 'hidden';\n  }\n}\n","var toString = require('./toString');\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nmodule.exports = uniqueId;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { getMeta } from \"@dashboard/application\";\n\n/**\n * A component for displaying and setting the document title.\n *\n * This component can render a default title or a custom title depending on the usage.\n *\n * @example <caption>Render the title in the default h1</caption>\n * <DocumentTitle title=\"Page Title\" />\n *\n * @example <caption>Render a custom title</caption>\n * <DocumentTitle title=\"Title Bar Title >\n *     <h1>Page Title</h1>\n * </DocumentTitle>\n */\nexport default class DocumentTitle extends React.Component<IProps> {\n    public componentDidMount() {\n        document.title = this.getHeadTitle(this.props);\n    }\n\n    public componentWillUpdate(nextProps: IProps) {\n        document.title = this.getHeadTitle(nextProps);\n    }\n\n    public render() {\n        if (this.props.children) {\n            return this.props.children;\n        } else {\n            return <h1>{this.props.title}</h1>;\n        }\n    }\n\n    /**\n     * Calculate the status bar title from the props.\n     *\n     * @param props - The props used to calculate the title.\n     * @returns Returns the title as a string.\n     */\n    private getHeadTitle(props: IProps): string {\n        const siteTitle: string = getMeta(\"ui.siteName\", \"\");\n        const parts: string[] = [];\n\n        if (props.title && props.title.length > 0) {\n            parts.push(props.title);\n        }\n        if (siteTitle.length > 0 && siteTitle !== props.title) {\n            parts.push(siteTitle);\n        }\n\n        return parts.join(\" - \");\n    }\n}\n\ninterface IProps {\n    title: string;\n    children?: React.ReactNode;\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { sprintf } from \"sprintf-js\";\nimport { t } from \"@dashboard/application\";\nimport DocumentTitle from \"@dashboard/components/DocumentTitle\";\n\nexport default class NotFoundPage extends React.PureComponent<IProps> {\n    public static defaultProps = {\n        type: \"Page\",\n    };\n\n    public render() {\n        return (\n            <div className=\"Center SplashInfo\">\n                <DocumentTitle title={this.title} />\n                <div>{this.message}</div>\n            </div>\n        );\n    }\n\n    private get title() {\n        return this.props.title || sprintf(t(\"%s Not Found\"), t(this.props.type));\n    }\n\n    private get message() {\n        return (\n            this.props.message ||\n            sprintf(t(\"The %s you were looking for could not be found.\"), t(this.props.type.toLowerCase()))\n        );\n    }\n}\n\ninterface IProps {\n    type: string;\n    title?: string;\n    message?: string;\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport className from \"classnames\";\n\nexport interface IContainer {\n    className?: string;\n    children?: JSX.Element;\n    tag?: string;\n}\n\nexport default class Container extends React.Component<IContainer> {\n    public static defaultProps = {\n        tag: \"div\",\n    };\n\n    public render() {\n        if (this.props.children) {\n            const Tag = `${this.props.tag}`;\n            return <Tag className={className(\"container\", this.props.className)}>{this.props.children}</Tag>;\n        } else {\n            return null;\n        }\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\n\nexport default class CompoundComponent<Props = {}, State = {}> extends React.Component<Props, State> {\n    protected childIsOfType = (child: React.ReactNode, component: React.ComponentType): boolean => {\n        const type = [component.displayName, component.name];\n\n        // @ts-ignore\n        const childType = child && child.type && (child.type.displayName || child.type.name);\n        return type.includes(childType);\n    };\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { Devices } from \"@knowledge/components/DeviceChecker\";\nimport className from \"classnames\";\nimport classNames from \"classnames\";\nimport CompoundComponent from \"@knowledge/layouts/CompoundComponent\";\n\ninterface IPanelLayoutProps {\n    device: Devices;\n    children: React.ReactNode;\n    className?: string;\n    toggleMobileMenu?: (isOpen: boolean) => void;\n    contentTag?: string;\n}\n\n/**\n * A responsive configurable Panel Layout.\n *\n * This works by declaring certain sections and having the layout place them for you.\n * See the example for usage. Just provide the sections you want to work with and the layout\n * will attempt to place them all in the best possible way.\n *\n * @layout Desktop\n * |            | Breadcrumbs  |             |\n * | LeftTop    | MiddleTop    | RightTop    |\n * | LeftBottom | MiddleBottom | RightBottom |\n *\n * @layout Tablet\n * |            | Breadcrumbs\n * | LeftTop    | RightTop\n * | LeftBottom | MiddleTop\n * |            | MiddelBottom\n * |            | RightBottom\n *\n * @layout Mobile\n *\n * HamburgerMenu / Panel - LeftBottom\n *\n * | Breadcrumbs  |\n * | LeftTop      |\n * | RightTop     |\n * | MiddleTop    |\n * | MiddleBottom |\n * | RightBottom  |\n *\n *\n * @example\n *  <PanelLayout>\n *      <PanelLayout.BreadCrumbs>\n *          <p>Put any component here</p>\n *      </PanelLayout.BreadCrumbs>\n *      <PanelLayout.LeftTop>\n *          <p>Put any component here</p>\n *      </PanelLayout.LeftTop>\n *      <PanelLayout.LeftBottom>\n *          <p>Put any component here</p>\n *      </PanelLayout.LeftBottom>\n *      <PanelLayout.MiddleBottom>\n *          <p>Put any component here</p>\n *      </PanelLayout.MiddleBottom>\n * </PanelLayout>\n */\nexport default class PanelLayout extends CompoundComponent<IPanelLayoutProps> {\n    public static LeftTop = LeftTop;\n    public static LeftBottom = LeftBottom;\n    public static MiddleTop = MiddleTop;\n    public static MiddleBottom = MiddleBottom;\n    public static RightTop = RightTop;\n    public static RightBottom = RightBottom;\n    public static Breadcrumbs = Breadcrumbs;\n\n    public static defaultProps = {\n        contentTag: \"div\",\n    };\n\n    public render() {\n        const { device } = this.props;\n        const children = this.getParsedChildren();\n\n        // Calculate some rendering variables.\n        const isMobile = device === Devices.MOBILE;\n        const isDesktop = device === Devices.DESKTOP;\n        const shouldRenderLeftPanel: boolean = !isMobile && !!(children.leftTop || children.leftBottom);\n        const shouldRenderRightPanel: boolean = isDesktop && !!(children.rightTop || children.rightBottom);\n        const renderMobilePanel: boolean = isMobile && !!children.leftBottom;\n\n        // Determine the classes we want to display.\n        const panelClasses = className(\n            \"panelLayout\",\n            { noLeftPanel: !shouldRenderLeftPanel },\n            { noRightPanel: !shouldRenderLeftPanel },\n            this.props.className,\n        );\n\n        const crumbClasses = className(\n            \"panelLayout-top\",\n            { noLeftPanel: !shouldRenderLeftPanel },\n            this.props.className,\n        );\n\n        // If applicable, set semantic tag, like \"article\"\n        const ContentTag = `${this.props.contentTag}`;\n\n        return (\n            <div className={panelClasses}>\n                {children.breadcrumbs && (\n                    <div className={crumbClasses}>\n                        <div className=\"panelLayout-container\">\n                            {shouldRenderLeftPanel && (\n                                <Panel className=\"panelLayout-left\">\n                                    <PanelArea className=\"panelArea-breadcrumbsSpacer\" />\n                                </Panel>\n                            )}\n                            <Panel\n                                className={className(\"panelLayout-breadcrumbs\", {\n                                    hasAdjacentPanel: shouldRenderLeftPanel,\n                                })}\n                            >\n                                <PanelArea className=\"panelArea-breadcrumbs\">{children.breadcrumbs}</PanelArea>\n                            </Panel>\n                        </div>\n                    </div>\n                )}\n\n                <main className=\"panelLayout-main\">\n                    <div className=\"panelLayout-container\">\n                        {shouldRenderLeftPanel && (\n                            <Panel className=\"panelLayout-left\" tag=\"aside\">\n                                <PanelArea className=\"panelArea-leftTop\">{children.leftTop}</PanelArea>\n                                <PanelArea className=\"panelArea-leftBottom\">{children.leftBottom}</PanelArea>\n                            </Panel>\n                        )}\n\n                        <ContentTag\n                            className={classNames(\"panelLayout-content\", { hasAdjacentPanel: shouldRenderLeftPanel })}\n                        >\n                            <div\n                                className={classNames(\"panelLayout-middle\", {\n                                    hasAdjacentPanel: shouldRenderRightPanel,\n                                })}\n                            >\n                                <PanelArea className=\"panelAndNav-middleTop\">{children.middleTop}</PanelArea>\n                                {isMobile && (\n                                    <PanelArea className=\"panelAndNav-mobileMiddle\" tag=\"aside\">\n                                        {children.leftTop}\n                                    </PanelArea>\n                                )}\n                                {!isDesktop && (\n                                    <PanelArea className=\"panelAndNav-tabletMiddle\" tag=\"aside\">\n                                        {children.rightTop}\n                                    </PanelArea>\n                                )}\n                                <PanelArea className=\"panelAndNav-middleBottom\">{children.middleBottom}</PanelArea>\n                                {!isDesktop && (\n                                    <PanelArea className=\"panelAndNav-tabletBottom\" tag=\"aside\">\n                                        {children.rightBottom}\n                                    </PanelArea>\n                                )}\n                            </div>\n                            {shouldRenderRightPanel && (\n                                <Panel className=\"panelLayout-right\">\n                                    <PanelArea className=\"panelArea-rightTop\" tag=\"aside\">\n                                        {children.rightTop}\n                                    </PanelArea>\n                                    <PanelArea className=\"panelArea-rightBottom\" tag=\"aside\">\n                                        {children.rightBottom}\n                                    </PanelArea>\n                                </Panel>\n                            )}\n                        </ContentTag>\n                    </div>\n                </main>\n            </div>\n        );\n    }\n\n    /**\n     * Parse out a specific subset of children. This is fast enough,\n     * but should not be called more than once per render.\n     */\n    private getParsedChildren() {\n        let leftTop: React.ReactNode = null;\n        let leftBottom: React.ReactNode = null;\n        let middleTop: React.ReactNode = null;\n        let middleBottom: React.ReactNode = null;\n        let rightTop: React.ReactNode = null;\n        let rightBottom: React.ReactNode = null;\n        let breadcrumbs: React.ReactNode = null;\n\n        React.Children.forEach(this.props.children, child => {\n            switch (true) {\n                case this.childIsOfType(child, PanelLayout.LeftTop):\n                    leftTop = child;\n                    break;\n                case this.childIsOfType(child, PanelLayout.LeftBottom):\n                    leftBottom = child;\n                    break;\n                case this.childIsOfType(child, PanelLayout.MiddleTop):\n                    middleTop = child;\n                    break;\n                case this.childIsOfType(child, PanelLayout.MiddleBottom):\n                    middleBottom = child;\n                    break;\n                case this.childIsOfType(child, PanelLayout.RightTop):\n                    rightTop = child;\n                    break;\n                case this.childIsOfType(child, PanelLayout.RightBottom):\n                    rightBottom = child;\n                    break;\n                case this.childIsOfType(child, PanelLayout.Breadcrumbs):\n                    breadcrumbs = child;\n                    break;\n            }\n        });\n\n        return {\n            leftTop,\n            leftBottom,\n            middleTop,\n            middleBottom,\n            rightTop,\n            rightBottom,\n            breadcrumbs,\n        };\n    }\n}\n\n// Simple container components.\ninterface IContainerProps {\n    className?: string;\n    children?: React.ReactNode;\n    tag?: string;\n}\n\nexport function Panel(props: IContainerProps) {\n    const Tag = `${props.tag ? props.tag : \"div\"}`;\n    return <Tag className={className(\"panelLayout-panel\", props.className)}>{props.children}</Tag>;\n}\n\nexport function PanelArea(props: IContainerProps) {\n    const Tag = `${props.tag ? props.tag : \"div\"}`;\n    return <Tag className={className(\"panelArea\", props.className)}>{props.children}</Tag>;\n}\n\nexport function PanelWidget(props: IContainerProps) {\n    return <div className={className(\"panelWidget\", props.className)}>{props.children}</div>;\n}\n\n// The components that make up the Layout itself.\ninterface IPanelItemProps {\n    children?: React.ReactNode;\n}\n\nexport function LeftTop(props: IPanelItemProps) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n}\n\nexport function LeftBottom(props: IPanelItemProps) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n}\n\nexport function MiddleTop(props: IPanelItemProps) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n}\n\nexport function MiddleBottom(props: IPanelItemProps) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n}\n\nexport function RightTop(props: IPanelItemProps) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n}\n\nexport function RightBottom(props: IPanelItemProps) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n}\n\nexport function Breadcrumbs(props: IPanelItemProps) {\n    return <React.Fragment>{props.children}</React.Fragment>;\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport className from \"classnames\";\nimport { Link } from \"react-router-dom\";\n\nexport interface IBreadcrumbProps {\n    className?: string;\n    lastElement: boolean;\n    url: string;\n    name: string;\n}\n\nexport default class Breadcrumb extends React.Component<IBreadcrumbProps> {\n    public render() {\n        let ariaCurrent;\n        if (this.props.lastElement) {\n            ariaCurrent = `page`;\n        }\n\n        return (\n            <li className=\"breadcrumb\">\n                <Link\n                    to={this.props.url}\n                    title={this.props.name}\n                    aria-current={ariaCurrent}\n                    className={className(\"breadcrumb-link\", this.props.className)}\n                    itemScope\n                    itemType=\"http://schema.org/Thing\"\n                    itemProp=\"item\"\n                >\n                    <span className=\"breadcrumb-label\" itemProp=\"name\">\n                        {this.props.name}\n                    </span>\n                </Link>\n            </li>\n        );\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport className from \"classnames\";\nimport { t } from \"@dashboard/application\";\nimport Breadcrumb from \"@knowledge/components/Breadcrumb\";\n\nexport interface ICrumb {\n    name: string;\n    url: string;\n}\n\nexport interface IBreadcrumbsProps {\n    children: ICrumb[];\n    className?: string;\n}\n\nexport default class Breadcrumbs extends React.Component<IBreadcrumbsProps> {\n    public render() {\n        if (this.props.children.length > 1) {\n            const crumbCount = this.props.children.length - 1;\n            const crumbs = this.props.children.map((crumb, index) => {\n                const lastElement = index === crumbCount;\n                const crumbSeparator = ``;\n                return (\n                    <React.Fragment key={`breadcrumb-${index}`}>\n                        <Breadcrumb lastElement={lastElement} name={crumb.name} url={crumb.url} />\n                        {!lastElement && (\n                            <li className=\"breadcrumb-item breadcrumbs-separator\">\n                                <span className=\"breadcrumbs-separatorIcon\">{crumbSeparator}</span>\n                            </li>\n                        )}\n                    </React.Fragment>\n                );\n            });\n            return (\n                <nav aria-label={t(\"Breadcrumb\")} className={className(\"breadcrumbs\", this.props.className)}>\n                    <ol className=\"breadcrumbs-list\">{crumbs}</ol>\n                </nav>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport Breadcrumbs, { ICrumb } from \"@knowledge/components/Breadcrumbs\";\nimport { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\n\ninterface IProps {}\n\nexport default class ArticleBreadcrumbs extends React.Component<IProps> {\n    public render() {\n        return (\n            <PanelWidget>\n                <Breadcrumbs>{this.dummyBreadcrumbData}</Breadcrumbs>\n            </PanelWidget>\n        );\n    }\n\n    /**\n     * Get hardcoded breadcrumb data until we implement breadcrumbs at the API level.\n     */\n    private get dummyBreadcrumbData(): ICrumb[] {\n        return [\n            {\n                name: \"Home\",\n                url: \"/kb\",\n            },\n            {\n                name: \"two\",\n                url: \"#\",\n            },\n            {\n                name: \"three\",\n                url: \"#\",\n            },\n            {\n                name: \"four\",\n                url: \"#\",\n            },\n            {\n                name: \"five\",\n                url: \"#\",\n            },\n            {\n                name: \"six\",\n                url: \"#\",\n            },\n        ];\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\n\ninterface IHeading {\n    title: string;\n    depth?: 1 | 2 | 3 | 4 | 5 | 6;\n    className?: string;\n}\n\nexport default class PageTitle extends React.Component<IHeading> {\n    public static defaultProps = {\n        depth: 2,\n    };\n\n    public render() {\n        const Tag = `h${this.props.depth}`;\n        return (\n            <Tag\n                className={classNames(\n                    \"heading\",\n                    `heading-${this.props.depth}`,\n                    { pageTitle: this.props.depth === 1 },\n                    this.props.className,\n                )}\n            >\n                {this.props.title}\n            </Tag>\n        );\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\nimport Heading from \"@knowledge/components/Heading\";\nimport { t } from \"@dashboard/application\";\n\ninterface IProps {}\n\nexport default class ArticleActions extends React.Component<IProps> {\n    public render() {\n        return (\n            <PanelWidget>\n                <Heading title={t(\"Top Left\")} />\n                <p>{`${\"(Actions)\"}`}</p>\n            </PanelWidget>\n        );\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\nimport { t } from \"@dashboard/application\";\nimport Heading from \"@knowledge/components/Heading\";\n\ninterface IProps {}\n\nexport default class ArticleNavigation extends React.Component<IProps> {\n    public render() {\n        return (\n            <PanelWidget>\n                <Heading title={t(\"Left Bottom\")} />\n                <p>{`${\"(Navigation)\"}`}</p>\n            </PanelWidget>\n        );\n    }\n}\n","/*\n * @author Stphane LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport React from \"react\";\nimport { t } from \"@dashboard/application\";\nimport classNames from \"classnames\";\n\nconst currentColorFill = {\n    fill: \"currentColor\",\n};\n\nexport function leftChevron(classes?: string) {\n    const title = `<`;\n    return (\n        <svg\n            className={classNames(\"icon\", \"icon-chevronLeft\", classes)}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 24 24\"\n        >\n            <title>{title}</title>\n            <path\n                d=\"M14.9,7.7l-4.4,4.4,4.4,4.4a.5.5,0,0,1,0,.6l-.6.6a.5.5,0,0,1-.6,0L8.5,12.5a.5.5,0,0,1,0-.6l5.2-5.2a.5.5,0,0,1,.6,0s.676.543.7.7A.325.325,0,0,1,14.9,7.7Z\"\n                style={currentColorFill}\n            />\n        </svg>\n    );\n}\n","/*\n * @author Stphane LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license GPL-2.0-only\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport { t } from \"@dashboard/application\";\nimport { leftChevron } from \"@knowledge/components/Icons\";\n\ninterface IBackLink {\n    url?: string;\n    title?: string;\n    className?: string;\n}\n\nexport default class BackLink extends React.Component<IBackLink> {\n    public static defaultProps = {\n        title: t(\"Back\"),\n    };\n    public render() {\n        if (this.props.url) {\n            return (\n                <div className={classNames(\"backLink\", this.props.className)}>\n                    <a\n                        href={this.props.url}\n                        aria-label={this.props.title}\n                        title={this.props.title}\n                        className=\"backLink-link\"\n                    >\n                        {leftChevron(\"backLink-icon\")}\n                    </a>\n                </div>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport classNames from \"classnames\";\nimport BackLink from \"@knowledge/components/BackLink\";\nimport Heading from \"@knowledge/components/Heading\";\n\ninterface IPageHeading {\n    title: string;\n    backUrl?: string; // back link\n    className?: string;\n    actions?: JSX.Element; // possible \"actions\" like a dropdown menu or other\n}\n\nexport default class PageHeading extends React.Component<IPageHeading> {\n    public render() {\n        return (\n            <div className={classNames(\"pageHeading\", this.props.className)}>\n                <div className=\"pageHeading-main\">\n                    <BackLink url={this.props.backUrl} className=\"pageHeading-backLink\" />\n                    {/* Will not render if no url is passed */}\n                    <Heading title={this.props.title} depth={1} />\n                </div>\n                {this.props.actions && <div className=\"pageHeading-actions\">{this.props.actions}</div>}\n            </div>\n        );\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\nimport PageHeading from \"@knowledge/components/PageHeading\";\nimport { IArticle } from \"@knowledge/@types/api\";\n\ninterface IProps {\n    article: IArticle;\n}\n\nexport default class ArticleTitle extends React.Component<IProps> {\n    public render() {\n        const { article } = this.props;\n        return (\n            <PanelWidget>\n                <PageHeading title={article.articleRevision.name} />\n            </PanelWidget>\n        );\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { IEmbedProps } from \"@dashboard/embeds\";\n\n/**\n * A base embed react component class.\n * @see {registerEmbedComponent}\n */\nexport default abstract class BaseEmbed<P extends IEmbedProps = IEmbedProps, S = {}> extends React.Component<P, S> {\n    public componentDidMount() {\n        this.props.onRenderComplete();\n    }\n\n    public abstract render();\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { registerEmbedComponent } from \"@dashboard/embeds\";\n\nexport function initCodePenEmbeds() {\n    registerEmbedComponent(\"codepen\", CodePenEmbed);\n}\n\nexport class CodePenEmbed extends BaseEmbed {\n    public render() {\n        const { attributes, height } = this.props.data;\n        const { id, src, style } = attributes;\n\n        return <iframe id={id} src={src} height={height || 300} style={style} scrolling=\"no\" />;\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { registerEmbedComponent } from \"@dashboard/embeds\";\n\nexport function initGiphyEmbeds() {\n    registerEmbedComponent(\"giphy\", GiphyEmbed);\n}\n\nexport class GiphyEmbed extends BaseEmbed {\n    public render() {\n        const { data } = this.props;\n        const { attributes, width, height } = data;\n        const { postID } = attributes;\n        const paddingBottom = ((height || 1) / (width || 1)) * 100 + \"%\";\n        const ratioStyle: React.CSSProperties = {\n            maxWidth: width ? width + \"px\" : \"100%\",\n            paddingBottom,\n        };\n\n        if (!postID) {\n            throw new Error(\"Giphy embed fail, the post could not be found\");\n        }\n        const src = `https://giphy.com/embed/${postID}`;\n\n        return (\n            <div className=\"embedExternal-ratio\" style={ratioStyle}>\n                <iframe src={src} className=\"giphy-embed embedGiphy-iframe\" />\n            </div>\n        );\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { registerEmbedComponent } from \"@dashboard/embeds\";\nimport { sanitizeUrl } from \"@dashboard/utility\";\n\nexport function initImageEmbeds() {\n    registerEmbedComponent(\"image\", ImageEmbed);\n}\n\nexport class ImageEmbed extends BaseEmbed {\n    public render() {\n        const { data } = this.props;\n        const { url, name } = data;\n        const sanitizedUrl = sanitizeUrl(url);\n\n        // Yes we actually want a target blank here (even if we don't want it on normal links).\n        return (\n            <a className=\"embedImage-link\" href={sanitizedUrl || \"\"} rel=\"nofollow noopener\" target=\"_blank\">\n                <img className=\"embedImage-img\" src={url || \"\"} alt={name || \"\"} />\n            </a>\n        );\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { ensureScript } from \"@dashboard/dom\";\nimport { onContent } from \"@dashboard/application\";\nimport { registerEmbedComponent } from \"@dashboard/embeds\";\n\nexport function initImgurEmbeds() {\n    registerEmbedComponent(\"imgur\", ImgurEmbed);\n    onContent(convertImgurEmbeds);\n}\n\nexport class ImgurEmbed extends BaseEmbed {\n    public render() {\n        const { data } = this.props;\n        const { attributes } = data;\n        const { postID, isAlbum } = attributes;\n\n        const dataID = isAlbum ? `a/${postID}` : postID;\n        const url = `//imgur.com/${postID}`;\n\n        return <blockquote className=\"imgur-embed-pub\" data-id={dataID} />;\n    }\n\n    public componentDidMount() {\n        void convertImgurEmbeds().then(this.props.onRenderComplete);\n    }\n\n    public componentDidUpdate() {\n        void convertImgurEmbeds().then(this.props.onRenderComplete);\n    }\n}\n\n/**\n * Renders posted imgur embeds.\n */\nexport async function convertImgurEmbeds() {\n    const images = Array.from(document.querySelectorAll(\".imgur-embed-pub\"));\n    if (images.length > 0) {\n        await ensureScript(\"//s.imgur.com/min/embed.js\");\n\n        if (!window.imgurEmbed) {\n            throw new Error(\"The Imgur post failed to load\");\n        }\n\n        if (window.imgurEmbed.createIframe) {\n            const imagesLength = images.length;\n            for (let i = 0; i < imagesLength; i++) {\n                window.imgurEmbed.createIframe();\n            }\n        } else {\n            window.imgurEmbed.tasks = images.length;\n        }\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { ensureScript } from \"@dashboard/dom\";\nimport { onContent } from \"@dashboard/application\";\nimport { registerEmbedComponent } from \"@dashboard/embeds\";\n\nexport function initInstagramEmbeds() {\n    registerEmbedComponent(\"instagram\", InstagramEmbed);\n    onContent(convertInstagramEmbeds);\n}\n\nexport class InstagramEmbed extends BaseEmbed {\n    public render() {\n        const { data } = this.props;\n        const { attributes, url } = data;\n        const { permaLink, versionNumber, isCaptioned } = attributes;\n        if (!data.attributes.permaLink) {\n            throw new Error(\"Attempted to embed a Instagram post failed link is invalid\");\n        }\n\n        return (\n            <blockquote\n                className=\"instagram-media\"\n                data-instgrmPermalink={permaLink}\n                data-instgrmVersion={versionNumber}\n                data-instgrmCaptioned={isCaptioned}\n            >\n                <a href={url}>{url}</a>\n            </blockquote>\n        );\n    }\n\n    public componentDidMount() {\n        void convertInstagramEmbeds().then(this.props.onRenderComplete);\n    }\n\n    public componentDidUpdate() {\n        void convertInstagramEmbeds().then(this.props.onRenderComplete);\n    }\n}\n\n/**\n * Renders posted instagram embeds.\n */\nexport async function convertInstagramEmbeds() {\n    const instagramEmbeds = document.querySelectorAll(\".instagram-media\");\n    if (instagramEmbeds.length > 0) {\n        await ensureScript(\"//platform.instagram.com/en_US/embeds.js\");\n\n        if (!window.instgrm) {\n            throw new Error(\"The Instagram post failed to load\");\n        }\n\n        window.instgrm.Embeds.process();\n    }\n}\n","/**\n  shave - Shave is a javascript plugin that truncates multi-line text within a html element based on set max height\n  @version v2.3.0\n  @link https://github.com/dollarshaveclub/shave#readme\n  @author Jeff Wainwright <yowainwright@gmail.com> (jeffry.in)\n  @license MIT\n**/\nfunction shave(target, maxHeight) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (!maxHeight) throw Error('maxHeight is required');\n  var els = typeof target === 'string' ? document.querySelectorAll(target) : target;\n  if (!els) return;\n  var character = opts.character || '';\n  var classname = opts.classname || 'js-shave';\n  var spaces = typeof opts.spaces === 'boolean' ? opts.spaces : true;\n  var charHtml = \"<span class=\\\"js-shave-char\\\">\".concat(character, \"</span>\");\n  if (!('length' in els)) els = [els];\n\n  for (var i = 0; i < els.length; i += 1) {\n    var el = els[i];\n    var styles = el.style;\n    var span = el.querySelector(\".\".concat(classname));\n    var textProp = el.textContent === undefined ? 'innerText' : 'textContent'; // If element text has already been shaved\n\n    if (span) {\n      // Remove the ellipsis to recapture the original text\n      el.removeChild(el.querySelector('.js-shave-char'));\n      el[textProp] = el[textProp]; // eslint-disable-line\n      // nuke span, recombine text\n    }\n\n    var fullText = el[textProp];\n    var words = spaces ? fullText.split(' ') : fullText; // If 0 or 1 words, we're done\n\n    if (words.length < 2) continue; // Temporarily remove any CSS height for text height calculation\n\n    var heightStyle = styles.height;\n    styles.height = 'auto';\n    var maxHeightStyle = styles.maxHeight;\n    styles.maxHeight = 'none'; // If already short enough, we're done\n\n    if (el.offsetHeight <= maxHeight) {\n      styles.height = heightStyle;\n      styles.maxHeight = maxHeightStyle;\n      continue;\n    } // Binary search for number of words which can fit in allotted height\n\n\n    var max = words.length - 1;\n    var min = 0;\n    var pivot = void 0;\n\n    while (min < max) {\n      pivot = min + max + 1 >> 1; // eslint-disable-line no-bitwise\n\n      el[textProp] = spaces ? words.slice(0, pivot).join(' ') : words.slice(0, pivot);\n      el.insertAdjacentHTML('beforeend', charHtml);\n      if (el.offsetHeight > maxHeight) max = spaces ? pivot - 1 : pivot - 2;else min = pivot;\n    }\n\n    el[textProp] = spaces ? words.slice(0, max).join(' ') : words.slice(0, max);\n    el.insertAdjacentHTML('beforeend', charHtml);\n    var diff = spaces ? \" \".concat(words.slice(max).join(' ')) : words.slice(max);\n    el.insertAdjacentHTML('beforeend', \"<span class=\\\"\".concat(classname, \"\\\" style=\\\"display:none;\\\">\").concat(diff, \"</span>\"));\n    styles.height = heightStyle;\n    styles.maxHeight = maxHeightStyle;\n  }\n}\n\nexport default shave;\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { sanitizeUrl } from \"@dashboard/utility\";\nimport { getData, setData } from \"@dashboard/dom\";\nimport debounce from \"lodash/debounce\";\nimport shave from \"shave\";\nimport { registerEmbedComponent } from \"@dashboard/embeds\";\n\nexport function initLinkEmbeds() {\n    registerEmbedComponent(\"link\", LinkEmbed);\n    truncateEmbedLinks();\n\n    // Retruncate links when the window resizes.\n    window.addEventListener(\"resize\", () => debounce(truncateEmbedLinks, 200)());\n}\n\nexport class LinkEmbed extends BaseEmbed {\n    public render() {\n        const { name, attributes, url, photoUrl, body } = this.props.data;\n        const title = name ? <h3 className=\"embedText-title embedLink-title\">{name}</h3> : null;\n\n        const source = <span className=\"embedLink-source meta\">{url}</span>;\n\n        let linkImage: JSX.Element | null = null;\n        if (photoUrl) {\n            linkImage = <img src={photoUrl} className=\"embedLink-image\" aria-hidden=\"true\" />;\n        }\n        const dateTime =\n            attributes.timestamp && attributes.humanTime ? (\n                <time className=\"embedLink-dateTime meta\" dateTime={attributes.timestamp}>\n                    {attributes.humanTime}\n                </time>\n            ) : null;\n\n        const sanitizedUrl = sanitizeUrl(url);\n        return (\n            <a className=\"embedLink-link\" href={sanitizedUrl} rel=\"noreferrer\">\n                <article className=\"embedText-body embedLink-body\">\n                    {linkImage}\n                    <div className=\"embedText-main embedLink-main\">\n                        <div className=\"embedText-header embedLink-header\">\n                            {title}\n                            {dateTime}\n                            {source}\n                        </div>\n                        <div className=\"embedLink-excerpt\">{body}</div>\n                    </div>\n                </article>\n            </a>\n        );\n    }\n}\n\n/**\n * Truncate embed link excerpts in a container\n *\n * @param container - Element containing embeds to truncate\n */\nexport function truncateEmbedLinks(container = document.body) {\n    const embeds = container.querySelectorAll(\".embedLink-excerpt\");\n    embeds.forEach(el => {\n        let untruncatedText = getData(el, \"untruncatedText\");\n\n        if (!untruncatedText) {\n            untruncatedText = el.innerHTML;\n            setData(el, \"untruncatedText\", untruncatedText);\n        } else {\n            el.innerHTML = untruncatedText;\n        }\n        truncateTextBasedOnMaxHeight(el);\n    });\n}\n\n/**\n * Truncate element text based on max-height\n *\n * @param excerpt - The excerpt to truncate.\n */\nfunction truncateTextBasedOnMaxHeight(excerpt: Element) {\n    const maxHeight = parseInt(getComputedStyle(excerpt)[\"max-height\"], 10);\n    if (maxHeight && maxHeight > 0) {\n        shave(excerpt, maxHeight);\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { registerEmbedComponent } from \"@dashboard/embeds\";\n\nexport function initSoundcloudEmbeds() {\n    registerEmbedComponent(\"soundcloud\", SoundcloudEmbed);\n}\n\nexport class SoundcloudEmbed extends BaseEmbed {\n    public render() {\n        const { attributes } = this.props.data;\n        const { postID, visual, showArtwork, embedUrl } = attributes;\n\n        // Ensure this is a track.\n        if (postID == null) {\n            throw new Error(\"Soundcloud embed fail, the track could not be found\");\n        }\n\n        const url = embedUrl + postID + \"&visual=\" + (visual || \"false\") + \"&show_artwork=\" + (showArtwork || \"false\");\n\n        return <iframe width=\"100%\" scrolling=\"no\" frameBorder=\"no\" src={url} />;\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { ensureScript } from \"@dashboard/dom\";\nimport { onContent } from \"@dashboard/application\";\nimport { IEmbedData, IEmbedElements, registerEmbedRenderer } from \"@dashboard/embeds\";\nimport { IScrapeData } from \"@dashboard/@types/api\";\n\nexport function initTwitterEmbeds() {\n    registerEmbedRenderer(\"twitter\", renderTweet);\n    onContent(convertTwitterEmbeds);\n    void convertTwitterEmbeds().then();\n}\n\n/**\n * Render a single twitter embed.\n */\nexport async function renderTweet(elements: IEmbedElements, data: IScrapeData) {\n    const contentElement = elements.content;\n    // Ensure the twitter library is loaded.\n    await ensureScript(\"//platform.twitter.com/widgets.js\");\n\n    if (!window.twttr) {\n        throw new Error(\"The Twitter widget failed to load.\");\n    }\n\n    // Ensure we have a status id to look up.\n    if (data.attributes.statusID == null) {\n        throw new Error(\"Attempted to embed a tweet but the statusID could not be found\");\n    }\n\n    // Check that we haven't already started to load this embed (In the case multiple onContents are fired off).\n    if (\n        !contentElement.classList.contains(\"js-twitterCardLoaded\") &&\n        !contentElement.classList.contains(\"js-twitterCardPreload\")\n    ) {\n        contentElement.classList.add(\"js-twitterCardPreload\");\n\n        // Render the embed.\n        const options = { conversation: \"none\" };\n        await window.twttr.widgets.createTweet(data.attributes.statusID, contentElement, options);\n        // Remove a url if there is one around.\n        const url = contentElement.querySelector(\".tweet-url\");\n        if (url) {\n            url.remove();\n        }\n\n        // Fade it in.\n        contentElement.classList.add(\"js-twitterCardLoaded\");\n    }\n}\n\n/**\n * Convert all of the twitter embeds in the page. This is for transforming twitter embeds that were\n * server rendered.\n *\n * @see library/Vanilla/Embeds/EmbedManager.php\n */\nexport async function convertTwitterEmbeds() {\n    const tweets = Array.from(document.querySelectorAll(\".js-twitterCard\"));\n    if (tweets.length > 0) {\n        await ensureScript(\"//platform.twitter.com/widgets.js\");\n        if (window.twttr) {\n            const promises = tweets.map(contentElement => {\n                // Get embed data out of the data attributes.\n                const statusID = contentElement.getAttribute(\"data-tweetid\");\n                const url = contentElement.getAttribute(\"data-tweeturl\") || \"\";\n\n                const renderData: IEmbedData = {\n                    type: \"twitter\",\n                    url,\n                    attributes: { statusID },\n                };\n\n                return renderTweet({ content: contentElement as HTMLElement, root: null as any }, renderData);\n            });\n\n            // Render all the pages twitter embeds at the same time.\n            await Promise.all(promises);\n        }\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport BaseEmbed from \"@dashboard/app/user-content/embeds/BaseEmbed\";\nimport { IEmbedProps, registerEmbedComponent } from \"@dashboard/embeds\";\nimport { simplifyFraction } from \"@dashboard/utility\";\nimport { t } from \"@dashboard/application\";\nimport { delegateEvent } from \"@dashboard/dom\";\nimport ReactDOM from \"react-dom\";\n\nexport function initVideoEmbeds() {\n    registerEmbedComponent(\"youtube\", VideoEmbed);\n    registerEmbedComponent(\"vimeo\", VideoEmbed);\n    registerEmbedComponent(\"twitch\", VideoEmbed);\n    registerEmbedComponent(\"wistia\", VideoEmbed);\n    delegateEvent(\"click\", \".js-playVideo\", handlePlayVideo);\n}\n\ninterface IState {\n    isPlaying: boolean;\n}\n\nexport class VideoEmbed extends BaseEmbed<IEmbedProps, IState> {\n    public constructor(props) {\n        super(props);\n        this.state = {\n            isPlaying: false,\n        };\n    }\n    public render() {\n        const { name, height, width, attributes, photoUrl } = this.props.data;\n        const { embedUrl } = attributes;\n\n        const ratioClass = this.ratioClass;\n        const style: React.CSSProperties = ratioClass\n            ? {}\n            : {\n                  paddingTop: ((height || 3) / (width || 4)) * 100 + \"%\",\n              };\n\n        const thumbnail = (\n            <div className={`embedVideo-ratio ${ratioClass}`} style={style}>\n                <button\n                    type=\"button\"\n                    data-url={embedUrl}\n                    aria-label={name || undefined}\n                    className=\"embedVideo-playButton iconButton\"\n                >\n                    <img\n                        onClick={this.clickHandler}\n                        src={photoUrl || undefined}\n                        role=\"presentation\"\n                        className=\"embedVideo-thumbnail\"\n                    />\n                    <span className=\"embedVideo-scrim\" />\n                    <PlayIcon />\n                </button>\n            </div>\n        );\n\n        return this.state.isPlaying ? <VideoIframe url={embedUrl} /> : thumbnail;\n    }\n\n    private clickHandler = () => {\n        this.setState({ isPlaying: true });\n    };\n\n    private get ratioClass(): string | undefined {\n        const { height, width } = this.props.data;\n        const ratio = simplifyFraction(height || 3, width || 4);\n        switch (ratio.shorthand) {\n            case \"21:9\":\n                return \"is21by9\";\n            case \"16:9\":\n                return \"is16by9\";\n            case \"4:3\":\n                return \"is4by3\";\n            case \"1:1\":\n                return \"is1by1\";\n        }\n    }\n}\n\nfunction VideoIframe(props: { url: string }) {\n    return (\n        <iframe\n            frameBorder=\"0\"\n            allow=\"autoplay; encrypted-media\"\n            className=\"embedVideo-iframe\"\n            src={props.url}\n            allowFullScreen={true}\n        />\n    );\n}\n\nfunction PlayIcon() {\n    const style: React.CSSProperties = { fill: \"currentColor\", strokeWidth: 0.3 };\n\n    return (\n        <svg className=\"embedVideo-playIcon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-1 -1 24 24\">\n            <title>{t(\"Play Video\")}</title>\n            <path\n                className=\"embedVideo-playIconPath embedVideo-playIconPath-circle\"\n                style={style}\n                d=\"M11,0A11,11,0,1,0,22,11,11,11,0,0,0,11,0Zm0,20.308A9.308,9.308,0,1,1,20.308,11,9.308,9.308,0,0,1,11,20.308Z\"\n            />\n            <polygon\n                className=\"embedVideo-playIconPath embedVideo-playIconPath-triangle\"\n                style={style}\n                points=\"8.609 6.696 8.609 15.304 16.261 11 8.609 6.696\"\n            />\n        </svg>\n    );\n}\n\n/**\n * Handle a click on a video.\n */\nfunction handlePlayVideo() {\n    // Inside of delegate event `this` is the current target of the event.\n    const playButton: HTMLElement = this;\n    const container = playButton.closest(\".embedVideo-ratio\");\n    if (container) {\n        const url = playButton.dataset.url as string;\n\n        ReactDOM.render(<VideoIframe url={url} />, container);\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { delegateEvent } from \"@dashboard/dom\";\n\nexport function initSpoilers() {\n    // Setup\n    delegateEvent(\"click\", \".js-toggleSpoiler\", handleToggleSpoiler);\n}\n\n/**\n * Toggle a spoiler open and closed.\n */\nfunction handleToggleSpoiler() {\n    const toggleButton: HTMLElement = this;\n\n    const spoilerContainer = toggleButton.closest(\".spoiler\");\n    if (spoilerContainer) {\n        spoilerContainer.classList.toggle(\"isShowingSpoiler\");\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport debounce from \"lodash/debounce\";\nimport { getElementHeight } from \"@dashboard/dom\";\n\ninterface IProps {\n    id: string;\n    isCollapsed: boolean;\n    preferredMaxHeight: number; // The actual max height could exceed this, but once we pass it stop adding elements.\n    setNeedsCollapser?: (needsCollapser: boolean) => void;\n    dangerouslySetInnerHTML: {\n        __html: string;\n    };\n}\n\ninterface IState {\n    maxHeight: number | string;\n}\n\ninterface IHeightInfo {}\n\n/**\n * A class for dynamic collapsable user content.\n */\nexport default class CollapsableUserContent extends React.PureComponent<IProps, IState> {\n    public state = {\n        maxHeight: \"100%\",\n    };\n    private selfRef: React.RefObject<HTMLDivElement> = React.createRef();\n\n    public render() {\n        const style: React.CSSProperties = { overflow: \"hidden\", maxHeight: this.state.maxHeight };\n\n        return (\n            <div\n                id={this.props.id}\n                className=\"collapsableContent userContent\"\n                style={style}\n                ref={this.selfRef}\n                dangerouslySetInnerHTML={this.props.dangerouslySetInnerHTML}\n            />\n        );\n    }\n\n    /**\n     * Do the initial height calculation and recalcuate if the window dimensions change.\n     */\n    public componentDidMount() {\n        this.calcMaxHeight();\n        window.addEventListener(\"resize\", () =>\n            debounce(() => {\n                this.calcMaxHeight();\n            }, 200)(),\n        );\n    }\n\n    /**\n     * If certain primary props change we need to recalculate the content height.\n     */\n    public componentDidUpdate(prevProps: IProps) {\n        if (\n            prevProps.dangerouslySetInnerHTML.__html !== this.props.dangerouslySetInnerHTML.__html ||\n            prevProps.isCollapsed !== this.props.isCollapsed\n        ) {\n            this.calcMaxHeight();\n        }\n    }\n\n    /**\n     * Calculate the exact pixel max height of the content around the threshold of preferredMaxHeight.\n     */\n    private getHeightInfo(): {\n        height: number | null;\n        needsCollapser: boolean;\n    } {\n        const self = this.selfRef.current;\n\n        if (self === null) {\n            return {\n                height: null,\n                needsCollapser: false,\n            };\n        }\n\n        if (self.childElementCount <= 1) {\n            return {\n                height: null,\n                needsCollapser: false,\n            };\n        }\n\n        let finalMaxHeight = 0;\n        let lastBottomMargin = 0;\n        for (const child of Array.from(self.children)) {\n            if (finalMaxHeight > this.props.preferredMaxHeight) {\n                return {\n                    height: finalMaxHeight,\n                    needsCollapser: true,\n                };\n            }\n\n            const { height, bottomMargin } = getElementHeight(child, lastBottomMargin);\n            if (finalMaxHeight > 0 && height > this.props.preferredMaxHeight) {\n                return {\n                    height: finalMaxHeight,\n                    needsCollapser: true,\n                };\n            }\n            lastBottomMargin = bottomMargin;\n\n            finalMaxHeight += height;\n        }\n\n        return {\n            height: finalMaxHeight,\n            needsCollapser: finalMaxHeight > this.props.preferredMaxHeight,\n        };\n    }\n\n    /**\n     * Calculate the CSS max height that we want to apply to the container div.\n     */\n    private calcMaxHeight() {\n        const { height, needsCollapser } = this.getHeightInfo();\n        if (needsCollapser && this.props.isCollapsed) {\n            this.setState({ maxHeight: height! });\n        } else {\n            this.setState({ maxHeight: this.selfRef.current!.scrollHeight });\n        }\n\n        this.props.setNeedsCollapser && this.props.setNeedsCollapser(needsCollapser);\n    }\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { registerEmbedComponent, IEmbedProps, IEmbedData, IQuoteEmbedData } from \"@dashboard/embeds\";\nimport { onContent, t, formatUrl, makeProfileUrl } from \"@dashboard/application\";\nimport CollapsableUserContent from \"@dashboard/app/user-content/CollapsableContent\";\nimport uniqueId from \"lodash/uniqueId\";\nimport classnames from \"classnames\";\nimport api from \"@dashboard/apiv2\";\n\nexport function initQuoteEmbeds() {\n    registerEmbedComponent(\"quote\", QuoteEmbed as any);\n    onContent(mountQuoteEmbeds);\n}\n\n/**\n * Mount all of the existing quote embeds in the page.\n *\n * Data (including server rendered HTML content should be coming down in JSON encoded attribute data-json).\n */\nexport function mountQuoteEmbeds() {\n    const embeds = document.querySelectorAll(\".js-quoteEmbed\");\n    for (const embed of embeds) {\n        const data = embed.getAttribute(\"data-json\");\n        if (data) {\n            const quoteData = JSON.parse(data) as IEmbedData;\n            const onRenderComplete = () => {\n                embed.removeAttribute(\"data-json\");\n                embed.classList.remove(\"embedResponsive-initialLink\");\n            };\n            ReactDOM.render(\n                <QuoteEmbed data={quoteData} inEditor={false} onRenderComplete={onRenderComplete} />,\n                embed,\n            );\n        }\n    }\n}\n\ninterface IState {\n    isCollapsed: boolean;\n    needsCollapseButton: boolean;\n    renderedBody: string;\n}\n\nfunction ChevronUpIcon() {\n    return (\n        <svg className=\"icon embedQuote-chevronUp\" viewBox=\"0 0 20 20\">\n            <title>{t(\"\")}</title>\n            <path\n                fill=\"currentColor\"\n                stroke-linecap=\"square\"\n                fill-rule=\"evenodd\"\n                d=\"M6.79521339,4.1285572 L6.13258979,4.7726082 C6.04408814,4.85847112 6,4.95730046 6,5.0690962 C6,5.18057569 6.04408814,5.27940502 6.13258979,5.36526795 L11.3416605,10.4284924 L6.13275248,15.4915587 C6.04425083,15.5774216 6.00016269,15.6762509 6.00016269,15.7878885 C6.00016269,15.8995261 6.04425083,15.9983555 6.13275248,16.0842184 L6.79537608,16.7282694 C6.88371504,16.8142905 6.98539433,16.8571429 7.10025126,16.8571429 C7.21510819,16.8571429 7.31678748,16.8141323 7.40512644,16.7282694 L13.5818586,10.7248222 C13.6701976,10.6389593 13.7142857,10.54013 13.7142857,10.4284924 C13.7142857,10.3168547 13.6701976,10.2181835 13.5818586,10.1323206 L7.40512644,4.1285572 C7.31678748,4.04269427 7.21510819,4 7.10025126,4 C6.98539433,4 6.88371504,4.04269427 6.79521339,4.1285572 L6.79521339,4.1285572 Z\"\n                transform=\"rotate(-90 9.857 10.429)\"\n            />\n        </svg>\n    );\n}\n\nfunction ChevronDownIcon() {\n    return (\n        <svg className=\"icon embedQuote-chevronDown\" viewBox=\"0 0 20 20\">\n            <title>{t(\"\")}</title>\n            <path\n                fill=\"currentColor\"\n                stroke-linecap=\"square\"\n                fill-rule=\"evenodd\"\n                d=\"M6.79521339,4.1285572 L6.13258979,4.7726082 C6.04408814,4.85847112 6,4.95730046 6,5.0690962 C6,5.18057569 6.04408814,5.27940502 6.13258979,5.36526795 L11.3416605,10.4284924 L6.13275248,15.4915587 C6.04425083,15.5774216 6.00016269,15.6762509 6.00016269,15.7878885 C6.00016269,15.8995261 6.04425083,15.9983555 6.13275248,16.0842184 L6.79537608,16.7282694 C6.88371504,16.8142905 6.98539433,16.8571429 7.10025126,16.8571429 C7.21510819,16.8571429 7.31678748,16.8141323 7.40512644,16.7282694 L13.5818586,10.7248222 C13.6701976,10.6389593 13.7142857,10.54013 13.7142857,10.4284924 C13.7142857,10.3168547 13.6701976,10.2181835 13.5818586,10.1323206 L7.40512644,4.1285572 C7.31678748,4.04269427 7.21510819,4 7.10025126,4 C6.98539433,4 6.88371504,4.04269427 6.79521339,4.1285572 L6.79521339,4.1285572 Z\"\n                transform=\"rotate(90 9.857 10.429)\"\n            />\n        </svg>\n    );\n}\n\n/**\n * An embed class for quoted user content on the same site.\n *\n * This is not an editable quote. Instead it an expandable/collapsable snapshot of the quoted/embedded comment/discussion.\n *\n * This can either recieve the post format and body (when created directly in the editor) or be given the fully rendered content (when mounting on top of existing server rendered DOM stuff).\n */\nexport class QuoteEmbed extends React.Component<IEmbedProps<IEmbedData>, IState> {\n    public state: IState = {\n        isCollapsed: true,\n        renderedBody: \"\",\n        needsCollapseButton: false,\n    };\n\n    public render() {\n        const { body, insertUser } = this.quoteData;\n        const id = uniqueId(\"collapsableContent-\");\n\n        const name = (this.quoteData as any).name;\n\n        const title = name ? (\n            <h2 className=\"embedText-title embedQuote-title\">\n                <a href={this.quoteData.url} className=\"embedText-titleLink\">\n                    {name}\n                </a>\n            </h2>\n        ) : null;\n\n        const bodyClasses = classnames(\"embedText-body\", \"embedQuote-body\", { isCollapsed: this.state.isCollapsed });\n        const userUrl = makeProfileUrl(insertUser.name);\n\n        return (\n            <blockquote className={bodyClasses}>\n                <div className=\"embedText-header embedQuote-header\">\n                    {title}\n                    <a href={userUrl} className=\"embedQuote-userLink\">\n                        <span className=\"embedQuote-userPhotoWrap\">\n                            <img\n                                src={insertUser.photoUrl}\n                                alt={insertUser.name}\n                                className=\"embedQuote-userPhoto\"\n                                tabIndex={-1}\n                            />\n                        </span>\n                        <span className=\"embedQuote-userName\">{insertUser.name}</span>\n                    </a>\n                    <a href={this.quoteData.url} className=\"embedQuote-metaLink\">\n                        <time\n                            className=\"embedText-dateTime embedQuote-dateTime meta\"\n                            dateTime={this.dateTime}\n                            title={this.titleTime}\n                        >\n                            {this.humanTime}\n                        </time>\n                    </a>\n\n                    {this.state.needsCollapseButton && (\n                        <button\n                            type=\"button\"\n                            className=\"embedQuote-collapseButton\"\n                            aria-label={t(\"Toggle Quote\")}\n                            onClick={this.toggleCollapseState}\n                            aria-pressed={this.state.isCollapsed}\n                        >\n                            {this.state.isCollapsed ? <ChevronDownIcon /> : <ChevronUpIcon />}\n                        </button>\n                    )}\n                </div>\n                <div className=\"embedText-main embedQuote-main\">\n                    <div className=\"embedQuote-excerpt\">\n                        <CollapsableUserContent\n                            setNeedsCollapser={this.setNeedsCollapser}\n                            isCollapsed={this.state.isCollapsed}\n                            id={id}\n                            preferredMaxHeight={100}\n                            dangerouslySetInnerHTML={{ __html: body ? body : this.state.renderedBody }}\n                        />\n                    </div>\n                </div>\n            </blockquote>\n        );\n    }\n\n    /**\n     * When the component mounts we need to ensure we have rendered post content.\n     *\n     * Either we were passed the content, or we need to make an API call to render it.\n     */\n    public componentDidMount() {\n        if (this.quoteData.body) {\n            this.props.onRenderComplete();\n        } else {\n            const body =\n                this.quoteData.format === \"Rich\" ? JSON.stringify(this.quoteData.bodyRaw) : this.quoteData.bodyRaw;\n            void api\n                .post(\"/rich/quote\", {\n                    body,\n                    format: this.quoteData.format,\n                })\n                .then(response => {\n                    this.setState({ renderedBody: response.data.quote }, this.props.onRenderComplete);\n                });\n        }\n    }\n\n    /**\n     * Callback for the collapser to determine if we need to show the collapse toggle or not.\n     */\n    private setNeedsCollapser = needsCollapser => {\n        this.setState({ needsCollapseButton: needsCollapser });\n    };\n\n    /**\n     * Toggle the state of whether or not we are collapsed.\n     */\n    private toggleCollapseState = (event: React.ChangeEvent<any>) => {\n        event.preventDefault();\n        this.setState({ isCollapsed: !this.state.isCollapsed });\n    };\n\n    /**\n     * Get the quote embed data out of the scrape data.\n     */\n    private get quoteData(): IQuoteEmbedData {\n        return this.props.data.attributes as IQuoteEmbedData;\n    }\n\n    /**\n     * Get the timestamp to display.\n     */\n    private get dateTime(): string {\n        return this.quoteData.dateUpdated || this.quoteData.dateInserted;\n    }\n\n    /**\n     * Get the title of the time tag (long extended date)\n     */\n    private get titleTime(): string {\n        const date = new Date(this.dateTime);\n        return date.toLocaleString(undefined, {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"numeric\",\n            weekday: \"long\",\n            hour: \"numeric\",\n            minute: \"numeric\",\n        });\n    }\n\n    /**\n     * Get a shorter human readable time for the time tag.\n     */\n    private get humanTime(): string {\n        const date = new Date(this.dateTime);\n        return date.toLocaleString(undefined, { year: \"numeric\", month: \"short\", day: \"numeric\" });\n    }\n}\n","/**\n * Wire together the different parts of the application.\n *\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { initCodePenEmbeds } from \"@dashboard/app/user-content/embeds/codepen\";\nimport { initGettyEmbeds, convertGettyEmbeds } from \"@dashboard/app/user-content/embeds/getty\";\nimport { initGiphyEmbeds } from \"@dashboard/app/user-content/embeds/giphy\";\nimport { initImageEmbeds } from \"@dashboard/app/user-content/embeds/image\";\nimport { initImgurEmbeds, convertImgurEmbeds } from \"@dashboard/app/user-content/embeds/imgur\";\nimport { initInstagramEmbeds, convertInstagramEmbeds } from \"@dashboard/app/user-content/embeds/instagram\";\nimport { initLinkEmbeds } from \"@dashboard/app/user-content/embeds/link\";\nimport { initSoundcloudEmbeds } from \"@dashboard/app/user-content/embeds/soundcloud\";\nimport { initTwitterEmbeds, convertTwitterEmbeds } from \"@dashboard/app/user-content/embeds/twitter\";\nimport { initVideoEmbeds } from \"@dashboard/app/user-content/embeds/video\";\nimport { initEmojiSupport } from \"@dashboard/app/user-content/emoji\";\nimport { initSpoilers } from \"@dashboard/app/user-content/spoilers\";\nimport { initQuoteEmbeds, mountQuoteEmbeds } from \"@dashboard/app/user-content/embeds/quote\";\n\nexport function initAllUserContent() {\n    // User content\n    initEmojiSupport();\n    initSpoilers();\n    initCodePenEmbeds();\n    initGettyEmbeds();\n    initGiphyEmbeds();\n    initImageEmbeds();\n    initImgurEmbeds();\n    initInstagramEmbeds();\n    initLinkEmbeds();\n    initSoundcloudEmbeds();\n    initTwitterEmbeds();\n    initVideoEmbeds();\n    initQuoteEmbeds();\n}\n\n/**\n * Runs method for all embeds that need to be rendered everytime content changes.\n * This is ideal for something like react's `componentDidMount`.\n */\nexport function convertAllUserContent() {\n    void convertGettyEmbeds();\n    void convertImgurEmbeds();\n    void convertInstagramEmbeds();\n    void convertTwitterEmbeds();\n    void mountQuoteEmbeds();\n}\n","/**\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport { onReady, onContent } from \"@dashboard/application\";\nimport { convertToSafeEmojiCharacters } from \"@dashboard/dom\";\n\nexport function initEmojiSupport() {\n    // Emoji\n    onReady(() => convertToSafeEmojiCharacters(document.body));\n    onContent(() => convertToSafeEmojiCharacters(document.body));\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport className from \"classnames\";\nimport { initAllUserContent } from \"@dashboard/app/user-content\";\n\ninterface IUserContent {\n    className?: string;\n    content: string;\n}\n\nexport default class UserContent extends React.Component<IUserContent> {\n    public render() {\n        return (\n            <div\n                className={className(\"userContent\", this.props.className)}\n                dangerouslySetInnerHTML={{ __html: this.props.content }}\n            />\n        );\n    }\n\n    public componentDidMount() {\n        initAllUserContent();\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { IArticle } from \"@knowledge/@types/api\";\nimport { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\nimport UserContent from \"@knowledge/components/UserContent\";\n\ninterface IProps {\n    article: IArticle;\n}\n\nexport default class ArticleContent extends React.Component<IProps> {\n    public render() {\n        const { article } = this.props;\n        return (\n            <PanelWidget>\n                <UserContent content={article.articleRevision.bodyRendered} />\n            </PanelWidget>\n        );\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\nimport { t } from \"@dashboard/application\";\nimport Heading from \"@knowledge/components/Heading\";\n\ninterface IProps {}\n\nexport default class ArticleTOC extends React.Component<IProps> {\n    public render() {\n        return (\n            <PanelWidget>\n                <Heading title={t(\"Table of Contents\")} />\n                <p>{`${\"(Table of contents)\"}`}</p>\n            </PanelWidget>\n        );\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\nimport { t } from \"@dashboard/application\";\nimport Heading from \"@knowledge/components/Heading\";\n\ninterface IProps {}\n\nexport default class RelatedArticles extends React.Component<IProps> {\n    public render() {\n        return (\n            <PanelWidget>\n                <Heading title={t(\"Right Bottom\")} />\n                <p>{`${\"(Table of contents)\"}`}</p>\n            </PanelWidget>\n        );\n    }\n}\n","/**\n * @author Stphane (slafleche) LaFlche <stephane.l@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport * as React from \"react\";\nimport { IArticle } from \"@knowledge/@types/api\";\nimport Container from \"@knowledge/layouts/components/Container\";\nimport PanelLayout, { PanelWidget } from \"@knowledge/layouts/PanelLayout\";\nimport { Devices } from \"@knowledge/components/DeviceChecker\";\nimport { t } from \"@dashboard/application\";\nimport ArticleBreadcrumbs from \"@knowledge/pages/article/components/ArticleBreadcrumbs\";\nimport ArticleActions from \"@knowledge/pages/article/components/ArticleActions\";\nimport ArticleNavigation from \"@knowledge/pages/article/components/ArticleNavigation\";\nimport ArticleTitle from \"@knowledge/pages/article/components/ArticleTitle\";\nimport ArticleContent from \"@knowledge/pages/article/components/ArticleContent\";\nimport ArticleTOC from \"@knowledge/pages/article/components/ArticleTOC\";\nimport RelatedArticles from \"@knowledge/pages/article/components/RelatedArticles\";\nimport { withDevice } from \"@knowledge/contexts/DeviceContext\";\n\ninterface IProps {\n    article: IArticle;\n    device: Devices;\n}\n\ninterface IState {}\n\nexport class ArticleLayout extends React.Component<IProps, IState> {\n    public render() {\n        const { article } = this.props;\n        return (\n            <Container>\n                <PanelLayout device={this.props.device}>\n                    <PanelLayout.Breadcrumbs>\n                        <ArticleBreadcrumbs />\n                    </PanelLayout.Breadcrumbs>\n                    <PanelLayout.LeftTop>\n                        <ArticleActions />\n                    </PanelLayout.LeftTop>\n                    <PanelLayout.LeftBottom>\n                        <ArticleNavigation />\n                    </PanelLayout.LeftBottom>\n                    <PanelLayout.MiddleTop>\n                        <ArticleTitle article={article} />\n                    </PanelLayout.MiddleTop>\n                    <PanelLayout.MiddleBottom>\n                        <ArticleContent article={article} />\n                    </PanelLayout.MiddleBottom>\n                    <PanelLayout.RightTop>\n                        <ArticleTOC />\n                    </PanelLayout.RightTop>\n                    <PanelLayout.RightBottom>\n                        <RelatedArticles />\n                    </PanelLayout.RightBottom>\n                </PanelLayout>\n            </Container>\n        );\n    }\n}\n\nexport default withDevice<IProps>(ArticleLayout);\n","/**\n * @author Adam (charrondev) Charron <adam.c@vanillaforums.com>\n * @copyright 2009-2018 Vanilla Forums Inc.\n * @license https://opensource.org/licenses/GPL-2.0 GPL-2.0\n */\n\nimport React from \"react\";\nimport { match } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport { IStoreState, IArticlePageState } from \"@knowledge/@types/state\";\nimport { IDeviceProps } from \"@knowledge/components/DeviceChecker\";\nimport { withDevice } from \"@knowledge/contexts/DeviceContext\";\nimport { LoadStatus } from \"@dashboard/@types/api\";\nimport { componentActions } from \"@knowledge/pages/article/articlePageActions\";\nimport NotFoundPage from \"@dashboard/components/NotFoundPage\";\nimport ArticleLayout from \"@knowledge/pages/article/components/ArticleLayout\";\n\ninterface IProps extends IDeviceProps {\n    match: match<{\n        slug: string;\n    }>;\n    articlePageState: IArticlePageState;\n    getArticle: typeof componentActions.getArticle;\n    clearPageState: typeof componentActions.clearArticlePageState;\n}\n\n/**\n * Page component for an article.\n */\nexport class ArticlePage extends React.Component<IProps> {\n    /**\n     * Render not found or the article.\n     */\n    public render() {\n        const { articlePageState } = this.props;\n        const id = this.parseIDFromSlug();\n\n        if (id === null || (articlePageState.status === LoadStatus.ERROR && articlePageState.error.status === 404)) {\n            return <NotFoundPage type=\"Page\" />;\n        }\n\n        if (articlePageState.status !== LoadStatus.SUCCESS) {\n            return null;\n        }\n\n        const { article } = articlePageState.data;\n\n        return <ArticleLayout article={article} />;\n    }\n\n    /**\n     * If the component mounts without any data we need to fetch request it.\n     */\n    public componentDidMount() {\n        const { articlePageState, getArticle } = this.props;\n        if (articlePageState.status !== LoadStatus.PENDING) {\n            return;\n        }\n\n        const id = this.parseIDFromSlug();\n        if (id === null) {\n            return;\n        }\n\n        const numericID = parseInt(id, 10);\n        if (!Number.isInteger(numericID)) {\n            return;\n        }\n\n        getArticle(numericID);\n    }\n\n    /**\n     * When the component unmounts we need to be sure to clear out the data we requested in componentDidMount.\n     */\n    public componentWillUnmount() {\n        this.props.clearPageState();\n    }\n\n    /**\n     * Parse the ID of the request article out of the slug in the URL.\n     *\n     * Slugs for an article can be almost anything.\n     * The contents of the last trailing slash represent the ID of the resource.\n     *\n     * @returns The ID or null if an ID could not be parsed out.\n     */\n    private parseIDFromSlug(): string | null {\n        const slug = this.props.match.params.slug;\n        const idRegex = /.+-(\\d+)/;\n        const id = idRegex.exec(slug);\n        if (id && id[0]) {\n            return id[1];\n        } else {\n            return null;\n        }\n    }\n}\n\n/**\n * Map in the state from the redux store.\n */\nfunction mapStateToProps(state: IStoreState) {\n    return {\n        articlePageState: state.knowledge.articlePage,\n    };\n}\n\n/**\n * Map in action dispatchable action creators from the store.\n */\nfunction mapDispatchToProps(dispatch) {\n    return {\n        getArticle: options => dispatch(componentActions.getArticle(options)),\n        clearPageState: () => dispatch(componentActions.clearArticlePageState()),\n    };\n}\n\nconst withRedux = connect(\n    mapStateToProps,\n    mapDispatchToProps,\n);\n\nexport default withRedux(withDevice(ArticlePage));\n"],"sourceRoot":""}