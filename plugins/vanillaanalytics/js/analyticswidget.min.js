function AnalyticsWidget(t){var e=[],i=null,n=null,r=[],s="",a="chart",o=null,d={end:new Date,start:new Date};this.addSupport=function(t){if("undefined"!==t)if(Array.isArray(t))for(var e=0;e<t.length;e++)this.addSupport(t[e]);else"string"==typeof t&&r.push(t)},this.createElements=function(){var t=this.getElements();null!==t&&t.container.parentNode.removeChild(t.container);var e={body:document.createElement("div"),container:document.createElement("div"),title:null};e.container.setAttribute("id","analytics_widget_"+o),e.container.setAttribute("class","analytics-widget analytics-widget-"+a),"metric"!==this.getType()&&(e.title=document.createElement("h4"),e.title.setAttribute("class","title"),e.title.innerHTML=this.getTitle(),e.container.appendChild(e.title)),e.body.setAttribute("class","body"),e.container.appendChild(e.body),i=e},this.getData=function(){return e},this.getElements=function(t){if("string"==typeof t){if("undefined"!=typeof i[t])return i[t];throw"Invalid widget child element specified"}return i},this.getHandler=function(){return n},this.getTitle=function(){return s},this.getTimeframe=function(){return d},this.getType=function(){return a},this.getWidgetID=function(){return o},this.setData=function(t){"object"==typeof t&&(e=t)},this.setHandler=function(t){"string"==typeof t&&"function"==typeof window[t]&&(n=window[t])},this.setTitle=function(t){"string"==typeof t&&(s=t)},this.setType=function(t){"string"==typeof t&&(a=t)},this.setWidgetID=function(t){"string"==typeof t&&(o=t)},this.setTimeframe=function(t,e){if("object"!=typeof t||!(t instanceof Date))throw"Invalid start date";if("object"!=typeof e||!(e instanceof Date))throw"Invalid end date";if(t>=e)throw"Invalid date range. Start equals or surpasses end.";return d.start=t,d.end=e,d},this.supports=function(t){return-1!==r.indexOf(t)},this.loadConfig(t)}AnalyticsWidget.prototype.loadConfig=function(t){if("object"!=typeof t)throw"Invalid dashboard config";"undefined"!=typeof t.data&&this.setData(t.data),"undefined"!=typeof t.handler&&this.setHandler(t.handler),"undefined"!=typeof t.supports&&this.addSupport(t.supports),"undefined"!=typeof t.title&&this.setTitle(t.title),"undefined"!=typeof t.type&&this.setType(t.type),"undefined"!=typeof t.widgetID&&this.setWidgetID(t.widgetID),"undefined"!=typeof t.timeframe&&"object"==typeof t.timeframe.start&&"object"==typeof t.timeframe.end&&this.setTimeframe(t.timeframe.start,t.timeframe.end)},AnalyticsWidget.prototype.render=function(){null===this.getElements()&&this.createElements();var t=this.getHandler();if(null===t)throw"No data handler configured for widget";var e=this.getTimeframe(),i=new t(e.start,e.end,this.getData(),this.getType(),this.getTitle());i.writeContents(this.getElements("body"))};