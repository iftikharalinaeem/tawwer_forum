{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","ensureSiteID","siteID","gdn","definition","console","log","loopQueries","get","x","property_name","addFilter","getCallback","getAnalysesProcessor","analysesProcessor","getClient","projectID","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","getTitle","getType","resetQuery","setCallback","newCallback","setAnalysesProcessor","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","getMetricMarkup","markup","Number","toLocaleString","replace","queryProcessor","KeenIOAnalysesProcessor","chartOptions","labelMapping","library","c3","chart","internal","fn","additionalConfig","axis_y_tick_format","n","parseFloat","toFixed","height","chartType","defaultOptions","axis","tick","count","format","grid","show","y","tooltip_contents","d","defaultTitleFormat","defaultValueFormat","color","text","toLocaleDateString","value","id","name","ratio","$","extend","dateFormat","formatPercent","formatSeconds","totalSeconds","hours","Math","floor","minutes","seconds","result","toString","renderBody","el","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","colors","oldTooltipContents","view","_rendered","update","render","runQuery","widget","updateParams","timeframe","inArray","queries","each","params","j","filter","property","KeenIOFilterCallback","run","error","analyses","getQueryResult","window","analyticsDashboard","isPersonal","call","hide","queryResult","analysis","process","analyse","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}