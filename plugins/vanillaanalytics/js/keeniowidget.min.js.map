{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","getCallback","getAnalysesProcessor","analysesProcessor","getClient","projectID","gdn","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","get","getTitle","getType","resetQuery","setCallback","newCallback","setAnalysesProcessor","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","getMetricMarkup","markup","Number","toLocaleString","replace","queryProcessor","KeenIOAnalysesProcessor","chartOptions","labelMapping","library","c3","chart","internal","fn","additionalConfig","axis_y_tick_format","n","parseFloat","toFixed","height","chartType","defaultOptions","axis","x","tick","count","format","grid","show","y","tooltip_contents","d","defaultTitleFormat","defaultValueFormat","color","text","toLocaleDateString","value","id","name","ratio","$","extend","dateFormat","formatPercent","formatSeconds","totalSeconds","hours","Math","floor","minutes","seconds","result","toString","renderBody","el","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","colors","oldTooltipContents","view","_rendered","update","render","runQuery","widget","updateParams","timeframe","inArray","queries","each","params","j","filter","property","KeenIOFilterCallback","run","error","analyses","getQueryResult","boundCallback","bind","hide","queryResult","analysis","process","analyse","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}