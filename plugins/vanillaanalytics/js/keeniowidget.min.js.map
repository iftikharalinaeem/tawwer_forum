{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","ensureSiteID","siteID","undefined","gdn","definition","loopQueries","get","x","property_name","addFilter","getCallback","getAnalysesProcessor","analysesProcessor","getClient","projectID","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","getTitle","getType","resetQuery","setCallback","newCallback","setAnalysesProcessor","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","getMetricMarkup","markup","Number","toLocaleString","replace","queryProcessor","KeenIOAnalysesProcessor","chartOptions","labelMapping","library","c3","chart","internal","fn","additionalConfig","axis_y_tick_format","n","parseFloat","toFixed","height","chartType","defaultOptions","axis","tick","count","format","grid","show","y","tooltip_contents","d","defaultTitleFormat","defaultValueFormat","color","text","toLocaleDateString","value","id","name","ratio","$","extend","dateFormat","formatPercent","formatSeconds","totalSeconds","hours","Math","floor","minutes","seconds","result","toString","renderBody","el","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","colors","oldTooltipContents","view","_rendered","update","render","runQuery","widget","updateParams","timeframe","inArray","queries","each","params","j","filter","property","KeenIOFilterCallback","run","error","analyses","getQueryResult","window","analyticsDashboard","isPersonal","call","hide","queryResult","analysis","process","analyse","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}