{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","getCallback","getClient","projectID","gdn","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","get","getTitle","getType","resetQuery","setCallback","newCallback","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","Date","setHours","setMonth","getMonth","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","divideResult","result","revisedResult","value","parseFloat","toFixed","timeframe","getMetricMarkup","markup","replace","Number","toLocaleString","setChartConfig","library","chartType","chartOptions","dateFormat","renderBody","el","$","parent","removeClass","innerHTML","parseRawData","labels","stacked","colors","x","view","_rendered","update","render","runQuery","widget","updateParams","run","error","analyses","getQueryResult","boundCallback","bind","primaryResult","shift","intervalValues","category","offsetComp","writeContents","container","forceNewElement","height","_prepared","prepare","addClass"],"mappings":"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","file":"keeniowidget.min.js"}