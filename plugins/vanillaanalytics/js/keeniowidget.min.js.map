{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","addSiteIDFilter","siteID","gdn","definition","loopQueries","get","x","property_name","addFilter","getCallback","getAnalysesProcessor","analysesProcessor","getClient","projectID","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","getTitle","getType","resetQuery","setCallback","newCallback","setAnalysesProcessor","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","getMetricMarkup","markup","Number","toLocaleString","replace","queryProcessor","KeenIOAnalysesProcessor","chartOptions","labelMapping","library","c3","chart","internal","fn","additionalConfig","axis_y_tick_format","n","parseFloat","toFixed","height","chartType","defaultOptions","axis","tick","count","format","grid","show","y","tooltip_contents","d","defaultTitleFormat","defaultValueFormat","color","text","toLocaleDateString","value","id","name","ratio","$","extend","dateFormat","formatPercent","formatSeconds","totalSeconds","hours","Math","floor","minutes","seconds","result","toString","renderBody","el","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","colors","oldTooltipContents","view","_rendered","update","render","runQuery","widget","updateParams","timeframe","inArray","queries","each","params","j","filter","property","KeenIOFilterCallback","run","error","analyses","getQueryResult","window","analyticsDashboard","isPersonal","call","hide","queryResult","analysis","process","analyse","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}