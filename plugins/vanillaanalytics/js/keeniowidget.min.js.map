{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callbacks","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","getCallbacks","getClient","projectID","gdn","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","get","getTitle","getType","resetQuery","setCallbacks","newCallbacks","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","divideResult","result","revisedResult","value","parseFloat","toFixed","timeframe","divideMetrics","metrics","metric","category","formatPercent","getMetricMarkup","markup","Number","toLocaleString","replace","chartOptions","labelMapping","axis","y","tick","outer","format","x","floor","Math","library","height","chartType","dateFormat","formatSeconds","totalSeconds","hours","minutes","seconds","toString","renderBody","el","$","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","colors","view","_rendered","update","render","runQuery","callback","widget","updateParams","run","error","analyses","getQueryResult","boundCallback","bind","primaryResult","j","intervalValues","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}