{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","getCallback","getQueryProcessor","queryProcessor","getClient","projectID","gdn","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","get","getTitle","getType","resetQuery","setCallback","newCallback","setQueryProcessor","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","divideResult","result","revisedResult","value","parseFloat","toFixed","timeframe","divideMetrics","metrics","metric","category","metricFormatPercent","getMetricMarkup","markup","Number","toLocaleString","replace","KeenIOQueryProcessor","chartOptions","labelMapping","axis","y","tick","outer","format","x","floor","Math","library","height","chartType","dateFormat","formatSeconds","totalSeconds","hours","minutes","seconds","toString","renderBody","el","$","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","colors","view","_rendered","update","render","runQuery","widget","updateParams","run","error","analyses","getQueryResult","boundCallback","bind","processedResult","getResult","primaryResult","j","intervalValues","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}