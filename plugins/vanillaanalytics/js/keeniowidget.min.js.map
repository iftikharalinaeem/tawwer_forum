{"version":3,"sources":["src/keeniowidget.js"],"names":["KeenIOWidget","config","callback","chartConfig","client","data","dataviz","interval","element","query","range","end","start","type","title","this","addQuery","Array","i","length","queryParams","eventCollection","maxAge","filters","isArray","groupBy","target_property","newQuery","Keen","Query","analisysType","push","getCallback","getAnalysesProcessor","analysesProcessor","getClient","projectID","gdn","meta","readKey","projectId","getConfig","key","defaultValue","getData","getDataviz","Dataviz","loadDatavizConfig","getElement","getInterval","getRange","getQuery","getQueryParam","index","queryCollection","parseInt","currentQuery","get","getTitle","getType","resetQuery","setCallback","newCallback","setAnalysesProcessor","setChartConfig","newChartConfig","setData","newData","setElement","newElement","HTMLElement","setInterval","newInterval","setRange","newRange","defaultRange","analyticsToolbar","getDefaultRange","Date","setType","newType","setTitle","newTitle","updateQueryParams","newParams","set","loadConfig","prototype","metricFormatPercent","metric","toFixed","getMetricMarkup","markup","Number","toLocaleString","replace","queryProcessor","KeenIOAnalysesProcessor","chartOptions","labelMapping","axis","y","tick","outer","format","x","floor","Math","library","height","chartType","dateFormat","formatSeconds","totalSeconds","hours","minutes","seconds","result","toString","renderBody","el","$","parent","removeClass","innerHTML","trigger","parseRawData","labels","stacked","colors","view","_rendered","update","render","runQuery","widget","updateParams","timeframe","queries","match","that","evalFromContext","js","context","eval","call","each","params","j","filter","property","value","console","log","exec","e","debug","run","error","analyses","getQueryResult","boundCallback","bind","queryResult","analysis","process","analyse","writeContents","container","forceNewElement","_prepared","prepare","addClass","widgetID","AnalyticsWidget","getIDFromAttribute","attr","parameters","Start","End","url","popin"],"mappings":"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","file":"keeniowidget.min.js"}