var analyticsToolbar={maxTicks:200,getDefaultRange:function(){var a=Cookies.getJSON("va-dateRange");return a="object"!=typeof a||"string"!=typeof a.start||"string"!=typeof a.end?{start:moment().subtract("month",1).toDate(),end:moment().toDate()}:{start:new Date(a.start),end:new Date(a.end)}},setWidgets:function(a,b){var c=[window.analyticsDashboard.getPanel("metrics"),window.analyticsDashboard.getPanel("charts")];for(var d in c){panel=c[d];for(var e in panel.widgets)widget=panel.widgets[e],"function"==typeof widget[a]&&(valid=widget[a].apply(widget,b),valid!==!1&&widget.render())}},updateIntervals:function(a){var b=new Date(a.end),c=new Date(a.start),d=(b-c)/1e3;d||(d=86400);var e=d/analyticsToolbar.maxTicks;$(".js-analytics-interval").each(function(){$(this).data("seconds")<e?$(this).addClass("disabled"):$(this).removeClass("disabled")}),($(".js-analytics-interval.active").hasClass("disabled")||0===$(".js-analytics-interval.active").length)&&($(".js-analytics-interval.active").removeClass("active"),$(".js-analytics-interval").each(function(){return $(this).hasClass("disabled")?void 0:($(this).trigger("click"),!1)}))}};$(document).on("change","#Form_cat01",function(){var a=$(this).val();analyticsToolbar.setWidgets("setFilter",["categoryAncestors.cat01.categoryID",a,"cat01"])}),$(document).on("click",".js-analytics-interval:not(.disabled)",function(){$(".js-analytics-interval").removeClass("active"),$(this).addClass("active");var a=$(this).data("interval");analyticsToolbar.setWidgets("setInterval",[a])}),$(document).ready(function(){var a=analyticsToolbar.getDefaultRange();$(".js-date-range").daterangepicker({alwaysShowCalendars:!0,startDate:a.start,endDate:a.end,opens:"left",buttonClasses:"btn",applyClass:"btn-primary",cancelClass:"btn-secondary",ranges:{"Past 30 Days":[moment().subtract(30,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Past Year":[moment().subtract(1,"year"),moment()],"Year to Date":[moment().startOf("year"),moment()]}}),$(".js-date-range").on("apply.daterangepicker",function(a,b){var c={start:b.startDate.toDate(),end:b.endDate.toDate()};Cookies.set("va-dateRange",c),analyticsToolbar.updateIntervals(c),analyticsToolbar.setWidgets("setRange",[c])}),$(".js-date-range").on("show.daterangepicker",function(a,b){console.log("show!"),$(".daterangepicker").addClass("got-it"),$(".daterangepicker").css("display","flex")}),analyticsToolbar.updateIntervals(a),analyticsToolbar.setWidgets("setRange",[a])});
//# sourceMappingURL=analyticstoolbar.min.js.map