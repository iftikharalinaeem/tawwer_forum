var analyticsToolbar={maxTicks:200,getDefaultRange:function(){var a=Cookies.getJSON("va-dateRange");return a="object"!=typeof a||"string"!=typeof a.start||"string"!=typeof a.end?{start:moment().subtract("month",1).toDate(),end:moment().toDate()}:{start:new Date(a.start),end:new Date(a.end)}},setWidgets:function(a,b){var c=[window.analyticsDashboard.getPanel("metrics"),window.analyticsDashboard.getPanel("charts")];for(var d in c){panel=c[d];for(var e in panel.widgets)widget=panel.widgets[e],"function"==typeof widget[a]&&(valid=widget[a].apply(widget,b),valid!==!1&&widget.render())}},updateIntervals:function(a){var b=new Date(a.end),c=new Date(a.start),d=(b-c)/1e3;d||(d=86400);var e=d/analyticsToolbar.maxTicks;$("#Form_intervals > option").each(function(){$(this).attr("data-seconds")<e?$(this).attr("disabled","disabled"):$(this).removeAttr("disabled")}),"disabled"===$("#Form_intervals option:selected").attr("disabled")&&$("#Form_intervals > option").each(function(){return $(this).attr("disabled")?void 0:($("#Form_intervals").val($(this).val()).trigger("change"),!1)})}};$(document).on("change","#Form_cat01",function(){var a=$(this).val();analyticsToolbar.setWidgets("setFilter",["categoryAncestors.cat01.categoryID",a,"cat01"])}),$(document).on("change","#Form_intervals",function(){var a=$(this).val();analyticsToolbar.setWidgets("setInterval",[a])}),$(document).on("ready",function(){$(".js-date-range").daterangepicker({datepickerOptions:{numberOfMonths:2},presetRanges:[{text:"Past 30 Days",dateStart:function(){return moment().subtract("days",30)},dateEnd:function(){return moment()}},{text:"This Month",dateStart:function(){return moment().startOf("month")},dateEnd:function(){return moment().endOf("month")}},{text:"Last Month",dateStart:function(){return moment().subtract("month",1).startOf("month")},dateEnd:function(){return moment().subtract("month",1).endOf("month")}},{text:"Past Year",dateStart:function(){return moment().subtract("year",1)},dateEnd:function(){return moment()}},{text:"Year to Date",dateStart:function(){return moment().startOf("year")},dateEnd:function(){return moment()}}],onChange:function(){var a=$(".js-date-range").daterangepicker("getRange");Cookies.set("va-dateRange",a),analyticsToolbar.updateIntervals(a),analyticsToolbar.setWidgets("setRange",[a])}}),$(".js-date-range").daterangepicker("setRange",analyticsToolbar.getDefaultRange())});
//# sourceMappingURL=analyticstoolbar.min.js.map