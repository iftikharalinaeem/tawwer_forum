var analyticsToolbar={inited:!1,maxTicks:200,getDefaultRange:function(){var a=Cookies.getJSON("va-dateRange");return a="object"!=typeof a||"string"!=typeof a.start||"string"!=typeof a.end?{start:moment().subtract("month",1).toDate(),end:moment().toDate()}:{start:new Date(a.start),end:new Date(a.end)}},setWidgets:function(a,b){var c=[window.analyticsDashboard.getPanel("metrics"),window.analyticsDashboard.getPanel("charts")];for(var d in c){panel=c[d];for(var e in panel.widgets)widget=panel.widgets[e],"function"==typeof widget[a]&&(valid=widget[a].apply(widget,b),window.analyticsDashboard.inited&&valid!==!1&&widget.render())}},updateIntervals:function(a){var b=Cookies.getJSON("va-interval"),c=new Date(a.end),d=new Date(a.start),e=(c-d)/1e3;e||(e=86400);var f=e/analyticsToolbar.maxTicks;$(".js-analytics-interval").each(function(){$(this).data("seconds")<f?$(this).addClass("disabled"):$(this).removeClass("disabled")});var g=$('.js-analytics-interval[data-interval="'+b+'"]');"undefined"!==b&&g.length>0&&!g.hasClass("disabled")?g.trigger("click"):($(".js-analytics-interval.active").hasClass("disabled")||0===$(".js-analytics-interval.active").length)&&($(".js-analytics-interval.active").removeClass("active"),$(".js-analytics-interval").each(function(){if(!$(this).hasClass("disabled"))return $(this).trigger("click"),!1}))}};$(document).on("change","#Form_cat01",function(){var a=$(this).val();analyticsToolbar.setWidgets("setFilter",["categoryAncestors.cat01.categoryID",a,"cat01"])}),$(document).on("click",".js-analytics-interval:not(.disabled)",function(){if(!$(this).hasClass("active")){$(".js-analytics-interval").removeClass("active"),$(this).addClass("active"),Cookies.set("va-interval",$(this).data("interval"));var a=$(this).data("interval");analyticsToolbar.setWidgets("setInterval",[a])}}),$(document).ready(function(){var a=analyticsToolbar.getDefaultRange();$(".js-date-range").daterangepicker({alwaysShowCalendars:!0,startDate:a.start,endDate:a.end,opens:"left",buttonClasses:"btn",applyClass:"btn-primary",cancelClass:"btn-secondary",maxDate:moment(),ranges:{"Past 30 Days":[moment().subtract(30,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Past Year":[moment().subtract(1,"year"),moment()],"Year to Date":[moment().startOf("year"),moment()]}}),$(".js-date-range").on("apply.daterangepicker",function(a,b){var c={start:b.startDate.toDate(),end:b.endDate.toDate()};Cookies.set("va-dateRange",c),analyticsToolbar.updateIntervals(c),analyticsToolbar.setWidgets("setRange",[c])}),$(".js-date-range").on("show.daterangepicker",function(a,b){$(".daterangepicker").css("display","flex")}),analyticsToolbar.updateIntervals(a),analyticsToolbar.inited=!0,analyticsToolbar.setWidgets("setRange",[a])});
//# sourceMappingURL=analyticstoolbar.min.js.map