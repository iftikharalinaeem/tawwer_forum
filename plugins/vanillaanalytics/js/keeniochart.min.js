function KeenIOChart(e){this.client=null,this.config=e||{},this.chartConfig=this.config.chart||{},this.query=[],this.addQuery(this.config.query||{})}KeenIOChart.prototype.addQuery=function(e){if(e instanceof Array)for(i in e)this.addQuery(e[i]);else if("object"==typeof e){var t,n;if(this.query.length>0&&"undefined"!=typeof this.query[0]){var r=this.query[0];t=r.interval||null,n=r.timeframe||null}else t=e.interval||null,n=e.timeframe||null;var a=new Keen.Query(e.analisysType||null,{eventCollection:e.eventCollection||null,filters:e.filters||[],interval:t,timeframe:n});a.title=e.title||null,this.query.push(a)}},KeenIOChart.prototype.getClient=function(){if(!this.client&&"function"==typeof Keen){var e=gdn.meta["keenio.projectID"]||!1,t=gdn.meta["keenio.readKey"]||!1;this.client=new Keen({projectId:e,readKey:t})}return this.client},KeenIOChart.prototype.write=function(e){if("object"==typeof e){var t=this.getClient();if("object"==typeof t){var n=new Keen.Dataviz,r=[];for(c in this.query)r.push(this.query[c].title);n.el(e).library("c3").chartType(this.chartConfig.type||null).chartOptions(this.chartConfig.options||null).prepare(),t.run(this.query,function(e,t){if(!e){var a=[];t instanceof Array||(t=[t]);var l=t[0].result;for(i in l){var o=[];o.push({category:r[0],result:l[i].value}),a.push({timeframe:l[i].timeframe,value:o})}n.parseRawData({result:a}).render()}})}}};