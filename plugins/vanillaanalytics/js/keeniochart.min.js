function KeenIOChart(e){this.client=null,this.config=e||{},this.chartConfig=this.config.chart||{},this.query=[],this.addQuery(this.config.query||{})}KeenIOChart.prototype.addQuery=function(e){if(e instanceof Array)for(i in e)this.addQuery(e[i]);else if("object"==typeof e){var t,n;if(this.query.length>0&&"undefined"!=typeof this.query[0]){var r=this.query[0],a=r.params||{};t=a.interval||null,n=a.timeframe||null}else t=e.interval||null,n=e.timeframe||null;var l=new Keen.Query(e.analisysType||null,{eventCollection:e.eventCollection||null,filters:e.filters||[],interval:t,timeframe:n});l.title=e.title||null,this.query.push(l)}},KeenIOChart.prototype.getClient=function(){if(!this.client&&"function"==typeof Keen){var e=gdn.meta["keenio.projectID"]||!1,t=gdn.meta["keenio.readKey"]||!1;this.client=new Keen({projectId:e,readKey:t})}return this.client},KeenIOChart.prototype.write=function(e){if("object"==typeof e){var t=this.getClient();if("object"==typeof t){var i=new Keen.Dataviz,n=[];for(c in this.query)n.push(this.query[c].title);i.el(e).library("c3").chartType(this.chartConfig.type||"").chartOptions(this.chartConfig.options||{}).prepare(),t.run(this.query,function(e,t){t instanceof Array||(t=[t]);var r=t[0].result,a=[];r.forEach(function(e,i){var r=[];t.forEach(function(e,t){r.push({category:n[t],result:e.result[i].value})}),a.push({timeframe:e.timeframe,value:r})}),i.parseRawData({result:a}).render()})}}};