<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Vanilla Community Discussions" 
    title_url="http://vanillaforums.org/discussions" 
    scrolling="true"
    author="Mark O'Sullivan" 
    author_email="mark@vanillaforums.com">
  </ModulePrefs>
  <ModulePrefs title="Dynamic Height" 
    height="500"> 
    <Require feature="dynamic-height"/>
  </ModulePrefs>
  
  <Content type="html">
  <![CDATA[
  <div id="content_div"></div>
  <script type="text/javascript">

  function getDiscussions() {
   var params = {};
   params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.GET;
   gadgets.io.makeRequest('http://vanillaforums.org/discussions/?DeliveryType=VIEW', response, params); 
  };

  function response(obj) { 
    // obj.data contains the feed data
    var html = "<style> 
ul.DataList li { margin: 0; padding: 0 0 4px; border-bottom: 1px solid #dbe3e6; }
ul.DataList li li { border: 0; padding: 0; }
ul.DataList, ul.DataList li ul { list-style: none; margin: 0; padding: 0; }
ul.DataList li ul li.Title { float: left; width: 560px; }
ul.DataList li ul li.Meta { clear: both; }
ul.DataList li ul li.Title a { border: 1px solid #eee; -moz-border-radius: 2px; -webkit-border-radius: 2px; background: #fafafa; margin: 4px 0; padding: 2px 8px; line-height: 130%; color: #2b3033; font-size: 105%; display: block; clear: left; }
ul.DataList li ul li.Title strong { display: block; padding: 6px 0 0 6px; margin: 0; font-size: 110%; font-weight: bold; }
ul.DataList li ul li.Title strong a { display: inline; border: 0; padding: 0; margin: 0; color: #2786C2; background: none; }
ul.DataList li ul li.Meta { font-family: 'lucida grande','Lucida Sans Unicode', Tahoma, sans-serif; margin-left: 5px; font-size: 11px; color: #80828c; }
ul.DataList li ul li.Meta span, ul.DataList li ul li.Meta span a, ul.DataList li ul li.Meta strong { margin-right: 12px; }
ul.DataList li ul li.Meta strong { background: #ff0; padding: 2px 4px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }
ul.DataList li ul li.Meta a { color: #2b2d33; }
body.Discussions h1 { margin: 0; }
li.DiscussionRow ul.Discussion { display: inline !important; }
ul.Announcements { margin: 0 0 20px; }
.Mine { background: #F5FCFF; }
li.New { background: #ffd; }
ul.DataList li ul li.Meta a.Category { background: #fafafa; padding: 2px 4px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }
ul.DataList li.Mine ul li.Meta a.Category { background: #fafdff; }
ul.DataList li.New ul li.Meta a.Category { background: #ffe; }
ul.Discussion li.Options { display: none; }
</style>";
  
    html += obj.text;
    document.getElementById('content_div').innerHTML = 'test3' + html;
    gadgets.window.adjustHeight();
  };

  gadgets.util.registerOnLoadHandler(getDiscussions);
  </script>
  ]]>
  </Content>
</Module>