@import "compass/css3/images";

/// Tags ///

$tagBackground: $btnPrimaryBackground !default;
$tagColor: $btnPrimaryColor !default;

$breadcrumbsBackground: darken($bodyBackground, 5%) !default;

$readBackground: accent() !default;
$readColor: accent(40%) !default;

$navbarBackground: #222 !default;
$navbarBackgroundHighlight: lighten($navbarBackground, 20%) !default;

$hilightBackground: if(lightness($bodyBackground) > 50%, darken($bodyBackground, 20%), lighten($bodyBackground, 20%));
$highlightColor: if(lightness($bodyBackground) > 50%, darken($bodyBackground, 50%), lighten($bodyBackground, 50%));

/** Typography **/

body {
   background: $bodyBackground;
   color: $textColor;
}

a,
.FlyoutMenu a {
   color: $linkColor;
}
a.TextColor, a .TextColor {
   color: $textColor;
}

a:hover, a.TextColor:hover, a:hover .TextColor {
   color: $linkColorHover;
}

h1, h2, h3, h4, h5,
h1 a, h2 a, h3 a, h4 a, h5 a
{
   color: $headingColor;
}

.Tag, .TagCloud li {
   background: $tagBackground;
   color: $tagColor;
}

.Tag a {
   color: $tagColor;
}

.Count {
	background: $tagBackground;
	color: $tagColor;
}

.Active .Count {
   color: $tagBackground;
	background: $tagColor;
}

.Item .AuthorInfo .MItem, .Item .CommentInfo .MItem,
.Item .AuthorInfo .MItem::before, .Item .CommentInfo .MItem::before,
.Gloss {
   color: accent(40%);
}

/** Navigation **/

.NavBar {
   background-color: $navbarBackground;
   @include background-image(linear-gradient(top, $navbarBackgroundHighlight, $navbarBackground));
}

.SiteMenu a, .NavBar .Username, .NavBar .MeBox-SignIn a {
   color: $navbarText;
}

.NavBar .FlyoutButton:hover .Sprite16,
.NavBar .Open .MeMenu .Sprite16 {
   background-image: spriteUrl($navbarTextHover)
}

.BreadcrumbsWrapper {
   background: $breadcrumbsBackground;
   border-bottom-color: darken($breadcrumbsBackground, 8%);
}

/** DataLists **/

.DataList {
   border-color: $tableBorder;
}

.DataList .Item, .DataList .Item {
   border-color: $tableBorder;
}

.Item.Read {
   background: $readBackground;
   color: $readColor;
}
.Item.Read a {
   color: $readColor;
}
.Item.Read a:hover {
   color: $linkColorHover;
}

.Item.Read .Tag, .Item.Read .Tag a {
   background: $readColor !important;
   color: $readBackground !important;
}

.ItemDiscussion .Meta, .DataList .Meta {
   color: transparentize($readColor, .1);
}

.DataList.Discussions .MCount, .DataList.Discussions .HasNew {
   color: $textColor;
}

.DataTable tbody td {
	border-color: $tableBorder;
}

/** Forms **/

.Button, .NavButton {
   background-color: $btnBackground;
   @include background-image(linear-gradient(top, lighten($btnBackground, 10%), darken($btnBackground, 10%)));
   border-color: darken($btnBackground, 20%);
   color: $btnColor;
   @if (lightness($btnColor) > 50%) {
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.75);
   }
}

.Button:hover, .NavButton:hover {
   background-color: darken($btnBackground, 10%);
   color: $btnColor;
   border-color: darken($btnBackground, 20%);
}

.NavButton.Handle .Sprite, .Button.Handle .Sprite {
   border-top-color: $btnColor;
}

.NavButton:hover, .NavButton {
   box-shadow: 0 1px 1px accent(10%);
}

.Button.Primary {
   background-color: $btnPrimaryBackground;
   @include background-image(linear-gradient(top, lighten($btnPrimaryBackground, 10%), darken($btnPrimaryBackground, 10%)));
   border-color: darken($btnPrimaryBackground, 20%);
   color: $btnPrimaryColor;
   
   @if (lightness($btnPrimaryColor) > 50%) {
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.75);
   }
}
.Button.Primary:hover {
   background-color: darken($btnPrimaryBackground, 10%);
   border-color: darken($btnPrimaryBackground, 20%);
}

.NavButton.Primary.Handle .Sprite, .Button.Primary.Handle .Sprite {
   border-top-color: $btnPrimaryColor;
}

.ButtonGroup.Open .Button.Handle, .Button:focus, .Button:active {
   background: darken($btnBackground, 5%);
   background-image: none;
   border-color: darken($btnBackground, 10%);
   box-shadow: 0 2px 12px rgba(0,0,0,.4) inset;
}

.ButtonGroup.Open .Button.Primary.Handle {
   background: darken($btnPrimaryBackground, 5%);
   background-image: none;
   border-color: darken($btnPrimaryBackground, 10%);
}

.Open .Handle.Primary .Sprite {
   border-top-color: #fff;
}

.FormWrapper {
   background-color: $formBackground;
}

/** Pagers **/

.Pager a, .Pager span {
   border-color: $tableBorder;
}

.Pager a:hover, .Pager .Highlight {
   background-color: $hilightBackground;
   color: $highlightColor;
}

/** Sprites **/

@if (lightness($bodyBackground) <= 50%) {
   .OptionsTitle, a.Bookmark, a.Bookmarked, a.Bookmarking {
      background-image: url('ui_sprites_white.png');
   }
}

.Sprite16 {
   background-image: spriteUrl($reactColor);
}

@if (midtone()) {
   a .Sprite16 {
      background-image: spriteUrl($linkColor, sprites-14-sweetx);
   }

   a:hover .Sprite16 {
      background-image: spriteUrl($linkColorHover, sprites-14-sweetxc);
   }
} @else {
   a .Sprite16 {
      background-image: spriteUrl($linkColor, sprites-14);
   }

   a:hover .Sprite16 {
      background-image: spriteUrl($linkColorHover, sprites-14c);
   }
}

.Reactions a {
   color: $reactColor;
}

.Reactions a:hover {
   color: $linkColorHover;
}

/** Popups **/

div.Popup .Body {
   background-color: $bodyBackground;
}

div.Popup h1 {
   border-color: $tableBorder;
}

div.Popup .Buttons {
   background-color: if(lightness($bodyBackground) > 50%, darken($bodyBackground, 10%), lighten($bodyBackground, 10%));
   border-color: $tableBorder;
   box-shadow: inset 0 1px 0 lighten($bodyBackground, 20%);
}

a.Close {
   color: $textColor;
}

/** Panel **/

.Box {
	border-color: $tableBorder;
}

.Box h4 {
   background: accent();
   border-color: $tableBorder;
   box-shadow: 0 1px 1px lighten(accent(), 30%) inset;
}

#Panel .FilterMenu {
   background: accent();
}

#Panel .PanelInfo li {
   border-color: $tableBorder;
}

.Hero {
   background: accent();
}

#Panel .FilterMenu .Active a, #Panel .FilterMenu .Active a:hover, .PanelInfo .Active {
   background: $tagBackground;
   color: $tagColor;
}

#Panel .FilterMenu .Active a .Sprite, 
#Panel .FilterMenu .Active a:hover .Sprite, 
.PanelInfo .Active .Sprite {
   background-image: spriteUrl($tagColor);
}

/** Misc **/

.ActivateSlider {
   background: accent(5%);
   box-shadow: 0 10px 30px darken(accent(5%), 20%) inset;
   border-color: accent(10%);
}

@import "sprites";