$tagBackground: $btnPrimaryBackground !default;
$tagColor: $btnPrimaryColor !default;

$reactColor: $textColor !default;

$breadcrumbsBackground: darken($bodyBackground, 5%) !default;

$readBackground: accent() !default;
$readColor: accent(40%) !default;

$navbarBackground: #222222 !default;
$navbarBackgroundHighlight: lighten($navbarBackground, 20%) !default;

$hilightBackground: if(lightness($bodyBackground) > 50%, darken($bodyBackground, 20%), lighten($bodyBackground, 20%));
$highlightColor: if(lightness($bodyBackground) > 50%, darken($bodyBackground, 50%), lighten($bodyBackground, 50%));

$casualText: accent(60%) !default;
$casualBackground: accent() !default;

$uiColor: $textColor !default;
$listBackground: $bodyBackground !default;
$boxBackground: $bodyBackground !default;
$boxBorder: accent(10%, $boxBackground) !default;

/** Typography **/

body {
   background: $bodyBackground;
   color: $textColor;
}

a,
.FlyoutMenu a {
   color: $linkColor;
}
a.TextColor, a .TextColor {
   color: $textColor;
}

a:hover, a.TextColor:hover, a:hover .TextColor {
   color: $linkColorHover;
}

h1, h2, h3, h4, h5,
h1 a, h2 a, h3 a, h4 a, h5 a
{
   color: $headingsColor;
   font-family: $headingsFontFamily;
}

.Tag, .TagCloud li {
   background: $tagBackground;
   color: $tagColor;
}

.Tag a {
   color: $tagColor;
}

.Count {
	background: $tagBackground;
	color: $tagColor;
}

.Active .Count {
   color: $tagBackground;
	background: $tagColor;
}

.Item .AuthorInfo .MItem, .Item .CommentInfo .MItem,
.Item .AuthorInfo .MItem::before, .Item .CommentInfo .MItem::before,
.Gloss {
   color: mix($textColor, $bodyBackground, 75%);
}

/** Navigation **/

.NavBar {
   background-color: $navbarBackground;
   background-image: linear-gradient(to top, $navbarBackgroundHighlight, $navbarBackground);
}

.SiteMenu a, .NavBar .Username, .NavBar .MeBox-SignIn a {
   color: $navbarText;
}

.NavBar .FlyoutButton:hover .Sprite16,
.NavBar .Open .MeMenu .Sprite16 {
   background-image: spriteUrl($navbarTextHover, $navbarSpriteStyle)
}

.BreadcrumbsWrapper {
   background: $breadcrumbsBackground;
   border-bottom-color: darken($breadcrumbsBackground, 8%);
}

/** DataLists **/

.DataList {
   border-color: $borderColor;
}

.DataList .Item, .DataList .Item {
   border-color: $borderColor;
}

.DataList .Item,
.DataTable .Item {
   background-color: $listBackground;
}

.Item.Read {
   background: $readBackground;
   color: $readColor;
}
.Item.Read a {
   color: $readColor;
}
.Item.Read a:hover {
   color: $linkColorHover;
}

.Item.Read .Tag, .Item.Read .Tag a {
   background: $readColor !important;
   color: $readBackground !important;
}

.ItemDiscussion .Meta, .DataList .Meta {
   color: mix($textColor, $bodyBackground, 75%);
}

.DataList.Discussions .MCount, .DataList.Discussions .HasNew {
   color: $textColor;
}

.DataList.Discussions .HasNew {
    background: $tagBackground;
    color: $tagColor;
}

.DataTable tbody td {
	border-color: $borderColor;
}

.Activities .DataList li {
   background: accent(3%, $listBackground);
}

/** Forms **/

.Button, .NavButton {
   background-color: $btnBackground;
   background-image: linear-gradient(to top, lighten($btnBackground, 10%), darken($btnBackground, 10%));
   border-color: darken($btnBackground, 20%);
   color: $btnColor;
   @if (lightness($btnColor) > 50%) {
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.75);
   }
}

.Button:hover, .NavButton:hover {
   background-color: darken($btnBackground, 10%);
   color: $btnColor;
   border-color: darken($btnBackground, 20%);
}

.NavButton.Handle .Sprite, .Button.Handle .Sprite {
   border-top-color: $btnColor;
}

.NavButton:hover, .NavButton {
   box-shadow: 0 1px 1px accent(10%);
}

.Button.Primary {
   background-color: $btnPrimaryBackground;
   background-image: linear-gradient(to top, lighten($btnPrimaryBackground, 10%), darken($btnPrimaryBackground, 10%));
   border-color: darken($btnPrimaryBackground, 10%) darken($btnPrimaryBackground, 10%) darken($btnPrimaryBackground, 20%);
   color: $btnPrimaryColor;

   @if (lightness($btnPrimaryColor) > 50%) {
      text-shadow: 0 1px 1px rgba(0, 0, 0, 0.75);
   }
}
.Button.Primary:hover {
   background-color: darken($btnPrimaryBackground, 10%);
   border-color: darken($btnPrimaryBackground, 20%);
}

.NavButton.Primary.Handle .Sprite, .Button.Primary.Handle .Sprite {
   border-top-color: $btnPrimaryColor;
}

.ButtonGroup.Open .Button.Handle,
.ButtonGroup.Open .NavButton.Handle {
   background: darken($btnBackground, 5%);
   background-image: none;
   border-color: darken($btnBackground, 10%);
   box-shadow: 0 0px 14px darken($btnBackground, 40%) inset;
}

.ButtonGroup.Open .Button.Primary.Handle {
   background: darken($btnPrimaryBackground, 5%);
   background-image: none;
   border-color: darken($btnPrimaryBackground, 10%);
   box-shadow: 0 2px 12px darken($btnPrimaryBackground, 40%) inset;
}

.Open .Handle.Primary .Sprite {
   border-top-color: #ffffff;
}

.FormWrapper {
   background-color: $formBackground;
}

/** Pagers **/

.Pager a, .Pager span {
   border-color: $borderColor;
   background-color: $listBackground;
}

.Pager a:hover, .Pager .Highlight {
   background-color: $hilightBackground;
}
.Pager .Highlight {
   color: $highlightColor;
}

.MiniPager {
   border-color: $borderColor;
}

.MiniPager a {
   border-color: $borderColor;
}

.MiniPager a:hover {
   background-color: accent(10%, $listBackground);
}

/** Sprites **/

.OptionsTitle, a.Bookmark, a.Bookmarked, a.Bookmarking {
   background-image: spriteUrl($uiColor, "ui_sprites-16c");
}

.Sprite16 {
   background-image: spriteUrl($reactColor, $spriteStyle);
}


a .Sprite16 {
   background-image: spriteUrl($linkColor, $spriteStyle);
}

a:hover .Sprite16 {
   background-image: spriteUrl($linkColorHover, $spriteStyleHover);
}


dl.About dt {
   background: spriteUrl(accent(20%, $textColor), "profile-sprites") 0 0 no-repeat;
   color: accent(25%, $textColor);
}

.Reactions a {
   color: $reactColor;
}

.Reactions a:hover {
   color: $linkColorHover;
}

/** Popups **/

div.Popup .Body {
   background-color: $bodyBackground;
}

div.Popup h1 {
   border-color: $borderColor;
}

div.Popup .Buttons {
   background-color: if(lightness($bodyBackground) > 50%, darken($bodyBackground, 10%), lighten($bodyBackground, 10%));
   border-color: $borderColor;
   box-shadow: inset 0 1px 0 lighten($bodyBackground, 20%);
}

a.Close {
   color: $textColor;
}

/** Panel **/

.Box {
	border-color: $boxBorder;
   background-color: $boxBackground;
}

.Box h4 {
   background: accent(5%, $boxBackground);
   border-color: $boxBorder;
   box-shadow: 0 1px 1px lighten(accent(5%, $boxBackground), 30%) inset;
}

@media (min-width: 1101px) {
   .PhotoWrapLarge {
      border-color: $boxBorder;
      background: $boxBackground;
      box-shadow: 0 1px 1px lighten(accent(5%, $boxBackground), 30%) inset;
   }
}

.FilterMenu {
   background-color: accent();
   border-color: $boxBorder;
}

.FilterMenu li a:hover {
   background-color: accent(10%);
}

#Panel .PanelInfo li a:hover {
   background-color: accent(5%, $boxBackground);
}

#Panel .PanelInfo li {
   border-color: $boxBorder;
}

.Hero {
   background: accent();
}

#Panel .FilterMenu .Active a, #Panel .FilterMenu .Active a:hover, .PanelInfo .Active {
   background: $tagBackground;
   color: $tagColor;
}

#Panel .FilterMenu .Active a .Sprite,
#Panel .FilterMenu .Active a:hover .Sprite,
.PanelInfo .Active .Sprite {
   background-image: spriteUrl($tagColor);
}

#Content .FilterMenu li a:hover {
   background-color: accent(5%, $boxBackground);
}
#Content .FilterMenu li.Active a {
   background: $tagBackground;
   color: $tagColor;
}

/** Messages **/

.WarningMessage {
    color: $warningText;
    background-color: $warningBackground;
    border-color: mix($warningText, $warningBackground);
}

.InfoMessage {
    color: $infoText;
    background-color: $infoBackground;
    border-color: mix($infoText, $infoBackground);
}

.AlertMessage {
    color: $errorText;
    background-color: $errorBackground;
    border-color: mix($errorText, $errorBackground);
}

.CasualMessage {
    color: $casualText;
    background-color: $casualBackground;
    border-color: mix($casualText, $casualBackground);
}

/** Misc **/

.ActivateSlider {
   background: accent(5%);
   box-shadow: 0 10px 30px darken(accent(5%), 20%) inset;
   border-color: accent(10%);
}

.Tile {
   background-color: $bodyBackground;
   border-color: $boxBorder;

   .AuthorWrap {
      background-color: accent(2%);
   }
}

@import "sprites";
